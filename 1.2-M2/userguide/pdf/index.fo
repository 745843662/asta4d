<?xml version="1.0" encoding="utf-8"?><fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="Helvetica,Symbol,ZapfDingbats" font-size="10pt" text-align="justify" line-height="1.4" font-selection-strategy="character-by-character" line-height-shift-adjustment="disregard-shifts" writing-mode="lr-tb" language="en"><fo:layout-master-set><fo:simple-page-master master-name="blank" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body display-align="center" margin-bottom="1.5cm" margin-top="1.5cm" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-blank" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-blank" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-blank" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-blank" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-first" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-odd" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-even" page-width="210mm" page-height="297mm" margin-top="1cm" margin-bottom="1cm" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="1.5cm" margin-top="1.5cm" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="1cm" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="1cm" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:page-sequence-master master-name="titlepage"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="titlepage-first" page-position="first"/><fo:conditional-page-master-reference master-reference="titlepage-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="titlepage-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="lot"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="lot-first" page-position="first"/><fo:conditional-page-master-reference master-reference="lot-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="lot-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="front"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="front-first" page-position="first"/><fo:conditional-page-master-reference master-reference="front-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="front-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="body"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="body-first" page-position="first"/><fo:conditional-page-master-reference master-reference="body-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="body-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="back"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="back-first" page-position="first"/><fo:conditional-page-master-reference master-reference="back-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="back-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="index"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="index-first" page-position="first"/><fo:conditional-page-master-reference master-reference="index-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="index-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master></fo:layout-master-set><fo:declarations xmlns:fox="http://xmlgraphics.apache.org/fop/extensions"><x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description xmlns:dc="http://purl.org/dc/elements/1.1/" rdf:about=""><dc:title>Asta4D Framework User Guide</dc:title><dc:creator>Rui Liu and Shunsuke Otani</dc:creator></rdf:Description><rdf:Description xmlns:pdf="http://ns.adobe.com/pdf/1.3/" rdf:about=""><pdf:Keywords>java, view first, web framework</pdf:Keywords></rdf:Description><rdf:Description xmlns:xmp="http://ns.adobe.com/xap/1.0/" rdf:about=""><xmp:CreatorTool>DocBook XSL Stylesheets with Apache FOP</xmp:CreatorTool></rdf:Description></rdf:RDF></x:xmpmeta></fo:declarations><fo:bookmark-tree><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-user-guide-book" starting-state="hide"><fo:bookmark-title>Asta4D Framework User Guide</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="toc...asta4d-user-guide-book"><fo:bookmark-title>Table of Contents</fo:bookmark-title></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-introduction" starting-state="hide"><fo:bookmark-title>Part I. Introduction</fo:bookmark-title><fo:bookmark internal-destination="chapter-overview" starting-state="hide"><fo:bookmark-title>1. Overview</fo:bookmark-title><fo:bookmark internal-destination="d0e46" starting-state="hide"><fo:bookmark-title>1.1 Why Asta4D</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e64" starting-state="hide"><fo:bookmark-title>1.2 How Asta4D helps us</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e106" starting-state="hide"><fo:bookmark-title>1.3 What does the name of "Asta4D" mean</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-user-guide" starting-state="hide"><fo:bookmark-title>Part II. User Guide</fo:bookmark-title><fo:bookmark internal-destination="chapter-Inheritable-template" starting-state="hide"><fo:bookmark-title>2. Flexible template</fo:bookmark-title><fo:bookmark internal-destination="inheritable-template" starting-state="hide"><fo:bookmark-title>2.1 Inheritable template</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="parametrized-embedding" starting-state="hide"><fo:bookmark-title>2.2 Parametrized embedding</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="renderer" starting-state="hide"><fo:bookmark-title>3. Renderer: easy to use, secure, testable</fo:bookmark-title><fo:bookmark internal-destination="split-rendering" starting-state="hide"><fo:bookmark-title>3.1 Split rendering logic from template</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="render-to-page" starting-state="hide"><fo:bookmark-title>3.2 Render data to page</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="immune-from-xss" starting-state="hide"><fo:bookmark-title>3.3 Immune from cross-site hole</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="test-rendering" starting-state="hide"><fo:bookmark-title>3.4 Test your rendering logic</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="url-mapping" starting-state="hide"><fo:bookmark-title>4. View first URL mapping and variable injection</fo:bookmark-title><fo:bookmark internal-destination="view-first-mechanism" starting-state="hide"><fo:bookmark-title>4.1 View first</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="url-rule-grammer" starting-state="hide"><fo:bookmark-title>4.2 The grammer of URL rule and path variable</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="variable-injection" starting-state="hide"><fo:bookmark-title>4.3 Variable Injection</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-side-effect" starting-state="hide"><fo:bookmark-title>5. Side effect and request handler</fo:bookmark-title><fo:bookmark internal-destination="d0e390" starting-state="hide"><fo:bookmark-title>5.1 The role with responsibility to http request: Request Handler</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e399" starting-state="hide"><fo:bookmark-title>5.2 Side effect of system operations</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e406" starting-state="hide"><fo:bookmark-title>5.3 Isolate side effect and multi thread rendering</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-request-handler" starting-state="hide"><fo:bookmark-title>6. Impement request handler and url mapping</fo:bookmark-title><fo:bookmark internal-destination="d0e428" starting-state="hide"><fo:bookmark-title>6.1 @RequestHandler</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e438" starting-state="hide"><fo:bookmark-title>6.2 delcare url rule for request handler</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e487" starting-state="hide"><fo:bookmark-title>6.3 Default request handler</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e511" starting-state="hide"><fo:bookmark-title>6.4 Global forward/redirect</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-adv-request-handler" starting-state="hide"><fo:bookmark-title>7. Advanced usage of request handler</fo:bookmark-title><fo:bookmark internal-destination="advanced-mvc" starting-state="hide"><fo:bookmark-title>7.1. Advanced MVC architecture</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="normalize-page-url" starting-state="hide"><fo:bookmark-title>7.2. Normalize page url patterns</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="rest-ajax" starting-state="hide"><fo:bookmark-title>7.3. Restful and ajax</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="handle-static-resource" starting-state="hide"><fo:bookmark-title>7.4. Handle static resouce files</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="handle-generic-path" starting-state="hide"><fo:bookmark-title>7.5. Handle generic path template files</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-form-flow" starting-state="hide"><fo:bookmark-title>8. Built in form flow</fo:bookmark-title><fo:bookmark internal-destination="d0e691" starting-state="hide"><fo:bookmark-title>8.1. Startup</fo:bookmark-title><fo:bookmark internal-destination="d0e694" starting-state="hide"><fo:bookmark-title>Form and form field</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e712" starting-state="hide"><fo:bookmark-title>Form handler</fo:bookmark-title><fo:bookmark internal-destination="d0e715" starting-state="hide"><fo:bookmark-title>Brief of BasicFormFlowHandlerTrait and FormProcessData</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e779" starting-state="hide"><fo:bookmark-title>built-in flows</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e820" starting-state="hide"><fo:bookmark-title>Implement a real form flow handler</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d0e873" starting-state="hide"><fo:bookmark-title>HTML template of form</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e894" starting-state="hide"><fo:bookmark-title>Form snippet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e919" starting-state="hide"><fo:bookmark-title>Cascade form POJO and array field</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d0e922" starting-state="hide"><fo:bookmark-title>8.2. Advanced</fo:bookmark-title><fo:bookmark internal-destination="d0e925" starting-state="hide"><fo:bookmark-title>Validation</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e949" starting-state="hide"><fo:bookmark-title>Message rendering</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e952" starting-state="hide"><fo:bookmark-title>Customize form field annotation</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e955" starting-state="hide"><fo:bookmark-title>A sample of defining a new flow rule</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-best-practice" starting-state="hide"><fo:bookmark-title>9. Best practice</fo:bookmark-title><fo:bookmark internal-destination="division-responsibilities" starting-state="hide"><fo:bookmark-title>9.1. Division of responsibilities between request handler and snippet</fo:bookmark-title><fo:bookmark internal-destination="do-update-by-request-handler" starting-state="hide"><fo:bookmark-title>Do update by request handler</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="normalize-page-condition" starting-state="hide"><fo:bookmark-title>Normalize page condition by request handler</fo:bookmark-title><fo:bookmark internal-destination="url-of-unique-resource-id" starting-state="hide"><fo:bookmark-title>The URL of current page represents the unique resource id of an entity(resource)</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="url-of-search-condition-for-list" starting-state="hide"><fo:bookmark-title>The URL of current page represents a search condition which can be used to retrieve a list of entities(resources)</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="common-usage-form-flow" starting-state="hide"><fo:bookmark-title>9.2. Common usage of form flow</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="best-snippet-way" starting-state="hide"><fo:bookmark-title>9.3. The best way of implementing a snippet</fo:bookmark-title><fo:bookmark internal-destination="perform-queries-simple" starting-state="hide"><fo:bookmark-title>Perform queries as simple as possible</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="make-use-of-parallelRowRender" starting-state="hide"><fo:bookmark-title>Make use of ParallelRowRender</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="cache-data" starting-state="hide"><fo:bookmark-title>Cache your data</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="avoid-duplicated-query" starting-state="hide"><fo:bookmark-title>Avoid duplicated query</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="prepare-snippet-instance" starting-state="hide"><fo:bookmark-title>Prepare snippet instance(set default value) by InitializableSnippet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="selector-x-convention" starting-state="hide"><fo:bookmark-title>"x-" convention selector</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="remove-rather-than-add" starting-state="hide"><fo:bookmark-title>Remove contents rather than add contents for conditional rendering</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-reference" starting-state="hide"><fo:bookmark-title>Part III. Reference</fo:bookmark-title><fo:bookmark internal-destination="chapter-detail-template" starting-state="hide"><fo:bookmark-title>10. Details of Template</fo:bookmark-title><fo:bookmark internal-destination="d0e1195" starting-state="hide"><fo:bookmark-title>10.1. Supported tags</fo:bookmark-title><fo:bookmark internal-destination="d0e1199" starting-state="hide"><fo:bookmark-title>afd:extension</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1218" starting-state="hide"><fo:bookmark-title>afd:block</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1264" starting-state="hide"><fo:bookmark-title>afd:embed</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1287" starting-state="hide"><fo:bookmark-title>afd:snippet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1323" starting-state="hide"><fo:bookmark-title>afd:group</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1336" starting-state="hide"><fo:bookmark-title>afd:comment</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1349" starting-state="hide"><fo:bookmark-title>afd:msg</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d0e1368" starting-state="hide"><fo:bookmark-title>10.2. Additional</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-detail-snippet" starting-state="hide"><fo:bookmark-title>11. Details of snippet class</fo:bookmark-title><fo:bookmark internal-destination="d0e1445" starting-state="hide"><fo:bookmark-title>11.1. Rendering APIs</fo:bookmark-title><fo:bookmark internal-destination="d0e1451" starting-state="hide"><fo:bookmark-title>Create and add Renderer instance</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="css-selector" starting-state="hide"><fo:bookmark-title>CSS Selector</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1813" starting-state="hide"><fo:bookmark-title>Render text</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1826" starting-state="hide"><fo:bookmark-title>Render DOM attribution</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1888" starting-state="hide"><fo:bookmark-title>Clear an Element</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1900" starting-state="hide"><fo:bookmark-title>Render raw Element</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1912" starting-state="hide"><fo:bookmark-title>Arbitrary rendering for an Element</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1929" starting-state="hide"><fo:bookmark-title>Recursive rendering</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1937" starting-state="hide"><fo:bookmark-title>Debug renderer</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1947" starting-state="hide"><fo:bookmark-title>Missing selector warning</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e1962" starting-state="hide"><fo:bookmark-title>List rendering</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d0e2013" starting-state="hide"><fo:bookmark-title>11.2. Other things about snippet and rendering</fo:bookmark-title><fo:bookmark internal-destination="d0e2016" starting-state="hide"><fo:bookmark-title>Nested snippet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2029" starting-state="hide"><fo:bookmark-title>InitializableSnippet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2039" starting-state="hide"><fo:bookmark-title>Component rendering</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2064" starting-state="hide"><fo:bookmark-title>SnippetInterceptor</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2067" starting-state="hide"><fo:bookmark-title>SnippetExtractor</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2070" starting-state="hide"><fo:bookmark-title>SnippetResolver</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2073" starting-state="hide"><fo:bookmark-title>SnippetInvoker</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-detail-var-injection" starting-state="hide"><fo:bookmark-title>12. Variable injection</fo:bookmark-title><fo:bookmark internal-destination="vi-context" starting-state="hide"><fo:bookmark-title>12.1. Context</fo:bookmark-title><fo:bookmark internal-destination="d0e2082" starting-state="hide"><fo:bookmark-title>Context/WebApplicationContext</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="vi-scope" starting-state="hide"><fo:bookmark-title>Scope</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="vi-ContextBindData" starting-state="hide"><fo:bookmark-title>ContextBindData</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="vi-injection" starting-state="hide"><fo:bookmark-title>12.2. Injection</fo:bookmark-title><fo:bookmark internal-destination="vi-contextdata" starting-state="hide"><fo:bookmark-title>@ContextData</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="vi-contextdataset" starting-state="hide"><fo:bookmark-title>@ContextDataSet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="vi-ContextDataFinder" starting-state="hide"><fo:bookmark-title>ContextDataFinder</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2364" starting-state="hide"><fo:bookmark-title>DataConvertor</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2367" starting-state="hide"><fo:bookmark-title>ContextDataHolder</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-detail-url-rule" starting-state="hide"><fo:bookmark-title>13. URL rule</fo:bookmark-title><fo:bookmark internal-destination="rule-apis" starting-state="hide"><fo:bookmark-title>13.1. Rule apis</fo:bookmark-title><fo:bookmark internal-destination="UrlMappingRuleInitializer" starting-state="hide"><fo:bookmark-title>UrlMappingRuleInitializer</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2448" starting-state="hide"><fo:bookmark-title>Handy rules</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="d0e2569" starting-state="hide"><fo:bookmark-title>13.2. Request handler result process</fo:bookmark-title><fo:bookmark internal-destination="d0e2574" starting-state="hide"><fo:bookmark-title>Content provider</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2577" starting-state="hide"><fo:bookmark-title>Result transforming</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2580" starting-state="hide"><fo:bookmark-title>Request handler chain</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-detail-form-flow" starting-state="hide"><fo:bookmark-title>14. details of form flow</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="chapter-detail-i18n" starting-state="hide"><fo:bookmark-title>15. i18n</fo:bookmark-title><fo:bookmark internal-destination="i18n-message" starting-state="hide"><fo:bookmark-title>15.1. message stringization</fo:bookmark-title><fo:bookmark internal-destination="i18n-I18nMessageHelper" starting-state="hide"><fo:bookmark-title>I18nMessageHelper</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="i18n-MessagePatternRetriever" starting-state="hide"><fo:bookmark-title>MessagePatternRetriever</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="i18n-default-locale-decision" starting-state="hide"><fo:bookmark-title>Default locale</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="i18n-afd-msg" starting-state="hide"><fo:bookmark-title>afd:msg</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="i18n-file-search" starting-state="hide"><fo:bookmark-title>15.2. file search order</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="overview" starting-state="hide"><fo:bookmark-title>16. Asta4dServlet and configuration</fo:bookmark-title><fo:bookmark internal-destination="d0e2799" starting-state="hide"><fo:bookmark-title>16.1. Asta4dServlet</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="d0e2841" starting-state="hide"><fo:bookmark-title>16.2. Configuration file</fo:bookmark-title></fo:bookmark></fo:bookmark><fo:bookmark internal-destination="chapter-integration-spring" starting-state="hide"><fo:bookmark-title>17. Integration with Spring</fo:bookmark-title><fo:bookmark internal-destination="integrate-spring-ioc" starting-state="hide"><fo:bookmark-title>17.1. Integrate with Spring IOC</fo:bookmark-title></fo:bookmark><fo:bookmark internal-destination="integrate-spring-mvc" starting-state="hide"><fo:bookmark-title>17.2. Integrate with Spring MVC</fo:bookmark-title></fo:bookmark></fo:bookmark></fo:bookmark></fo:bookmark-tree><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-user-guide-book"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-introduction"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-overview"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e46"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e64"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e106"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-user-guide"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-Inheritable-template"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="inheritable-template"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="parametrized-embedding"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="renderer"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="split-rendering"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="render-to-page"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="immune-from-xss"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="test-rendering"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="url-mapping"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="view-first-mechanism"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="url-rule-grammer"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="variable-injection"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-side-effect"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e390"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e399"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e406"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-request-handler"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e428"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e438"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e487"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e511"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-adv-request-handler"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="advanced-mvc"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="normalize-page-url"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="rest-ajax"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="handle-static-resource"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="handle-generic-path"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-form-flow"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e691"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e694"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e712"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e715"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e779"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e820"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e873"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e894"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e919"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e922"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e925"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e949"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e952"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e955"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-best-practice"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="division-responsibilities"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="do-update-by-request-handler"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="normalize-page-condition"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="url-of-unique-resource-id"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="url-of-search-condition-for-list"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="common-usage-form-flow"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="best-snippet-way"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="perform-queries-simple"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="make-use-of-parallelRowRender"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="cache-data"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="avoid-duplicated-query"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="prepare-snippet-instance"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="selector-x-convention"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="remove-rather-than-add"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="asta4d-reference"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-template"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1195"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1199"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1218"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1264"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1287"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1323"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1336"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1349"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1368"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-snippet"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1445"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1451"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="css-selector"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1813"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1826"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1888"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1900"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1912"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1929"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1937"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1947"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e1962"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2013"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2016"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2029"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2039"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2064"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2067"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2070"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2073"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-var-injection"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-context"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2082"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-scope"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-ContextBindData"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-injection"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-contextdata"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-contextdataset"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="vi-ContextDataFinder"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2364"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2367"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-url-rule"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="rule-apis"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="UrlMappingRuleInitializer"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2448"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2569"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2574"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2577"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2580"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-form-flow"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-detail-i18n"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-message"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-I18nMessageHelper"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-MessagePatternRetriever"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-default-locale-decision"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-afd-msg"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="i18n-file-search"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="overview"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2799"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="d0e2841"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="chapter-integration-spring"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="integrate-spring-ioc"/><fox:destination xmlns:fox="http://xmlgraphics.apache.org/fop/extensions" internal-destination="integrate-spring-mvc"/><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="titlepage" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="asta4d-user-guide-book"><fo:block><fo:block><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" font-size="24.8832pt" text-align="center" space-before="18.6624pt"><fo:block keep-with-next.within-column="always" hyphenate="false">        
        <fo:block id="d0e5"><fo:external-graphic src="url(./asta4d-doc/src/resources/docbkx/images/logo.png)" width="auto" height="auto" content-width="70%" content-height="70%" content-type="content-type:image/png"/></fo:block>
        Asta4D Framework User Guide
    </fo:block></fo:block><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" font-size="12pt" text-align="center" space-before="2in"><fo:block><fo:block>Rui Liu</fo:block><fo:block>Shunsuke Otani</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...asta4d-user-guide-book"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="Helvetica,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="asta4d-introduction">I. Introduction</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="asta4d-introduction"><fo:page-number-citation ref-id="asta4d-introduction"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.asta4d-introduction" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-overview">1. Overview</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-overview"><fo:page-number-citation ref-id="chapter-overview"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-overview" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e46">1.1. Why Asta4D</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e46"><fo:page-number-citation ref-id="d0e46"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e64">1.2. How Asta4D helps us</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e64"><fo:page-number-citation ref-id="d0e64"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e106">1.3. What does the name of "Asta4D" mean</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e106"><fo:page-number-citation ref-id="d0e106"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="asta4d-user-guide">II. User Guide</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="asta4d-user-guide"><fo:page-number-citation ref-id="asta4d-user-guide"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.asta4d-user-guide" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-Inheritable-template">2. Flexible template</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-Inheritable-template"><fo:page-number-citation ref-id="chapter-Inheritable-template"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-Inheritable-template" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="inheritable-template">2.1. Inheritable template</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="inheritable-template"><fo:page-number-citation ref-id="inheritable-template"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="parametrized-embedding">2.2. Parametrized embedding</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="parametrized-embedding"><fo:page-number-citation ref-id="parametrized-embedding"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="renderer">3. Renderer: easy to use, secure, testable</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="renderer"><fo:page-number-citation ref-id="renderer"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.renderer" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="split-rendering">3.1. Split rendering logic from template</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="split-rendering"><fo:page-number-citation ref-id="split-rendering"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="render-to-page">3.2. Render data to page</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="render-to-page"><fo:page-number-citation ref-id="render-to-page"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="immune-from-xss">3.3. Immune from cross-site hole</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="immune-from-xss"><fo:page-number-citation ref-id="immune-from-xss"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="test-rendering">3.4. Test your rendering logic</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="test-rendering"><fo:page-number-citation ref-id="test-rendering"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-mapping">4. View first URL mapping and variable injection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-mapping"><fo:page-number-citation ref-id="url-mapping"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.url-mapping" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="view-first-mechanism">4.1. View first</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="view-first-mechanism"><fo:page-number-citation ref-id="view-first-mechanism"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-rule-grammer">4.2. The grammer of URL rule and path variable</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-rule-grammer"><fo:page-number-citation ref-id="url-rule-grammer"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="variable-injection">4.3. Variable Injection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="variable-injection"><fo:page-number-citation ref-id="variable-injection"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-side-effect">5. Side effect and request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-side-effect"><fo:page-number-citation ref-id="chapter-side-effect"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-side-effect" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e390">5.1. The role with responsibility to http request: Request Handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e390"><fo:page-number-citation ref-id="d0e390"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e399">5.2. Side effect of system operations</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e399"><fo:page-number-citation ref-id="d0e399"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e406">5.3. Isolate side effect and multi thread rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e406"><fo:page-number-citation ref-id="d0e406"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-request-handler">6. Impement request handler and url mapping</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-request-handler"><fo:page-number-citation ref-id="chapter-request-handler"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-request-handler" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e428">6.1. @RequestHandler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e428"><fo:page-number-citation ref-id="d0e428"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e438">6.2. delcare url rule for request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e438"><fo:page-number-citation ref-id="d0e438"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e487">6.3. Default request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e487"><fo:page-number-citation ref-id="d0e487"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e511">6.4. Global forward/redirect</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e511"><fo:page-number-citation ref-id="d0e511"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-adv-request-handler">7. Advanced usage of request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-adv-request-handler"><fo:page-number-citation ref-id="chapter-adv-request-handler"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-adv-request-handler" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="advanced-mvc">7.1. Advanced MVC architecture</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="advanced-mvc"><fo:page-number-citation ref-id="advanced-mvc"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="normalize-page-url">7.2. Normalize page url patterns</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="normalize-page-url"><fo:page-number-citation ref-id="normalize-page-url"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="rest-ajax">7.3. Restful and ajax</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="rest-ajax"><fo:page-number-citation ref-id="rest-ajax"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="handle-static-resource">7.4. Handle static resouce files</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="handle-static-resource"><fo:page-number-citation ref-id="handle-static-resource"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="handle-generic-path">7.5. Handle generic path template files</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="handle-generic-path"><fo:page-number-citation ref-id="handle-generic-path"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-form-flow">8. Built in form flow</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-form-flow"><fo:page-number-citation ref-id="chapter-form-flow"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-form-flow" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e691">8.1. Startup</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e691"><fo:page-number-citation ref-id="d0e691"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e691" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e694">Form and form field</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e694"><fo:page-number-citation ref-id="d0e694"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e712">Form handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e712"><fo:page-number-citation ref-id="d0e712"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e873">HTML template of form</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e873"><fo:page-number-citation ref-id="d0e873"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e894">Form snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e894"><fo:page-number-citation ref-id="d0e894"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e919">Cascade form POJO and array field</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e919"><fo:page-number-citation ref-id="d0e919"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e922">8.2. Advanced</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e922"><fo:page-number-citation ref-id="d0e922"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e922" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e925">Validation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e925"><fo:page-number-citation ref-id="d0e925"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e949">Message rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e949"><fo:page-number-citation ref-id="d0e949"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e952">Customize form field annotation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e952"><fo:page-number-citation ref-id="d0e952"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e955">A sample of defining a new flow rule</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e955"><fo:page-number-citation ref-id="d0e955"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-best-practice">9. Best practice</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-best-practice"><fo:page-number-citation ref-id="chapter-best-practice"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-best-practice" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="division-responsibilities">9.1. Division of responsibilities between request handler and snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="division-responsibilities"><fo:page-number-citation ref-id="division-responsibilities"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.division-responsibilities" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="do-update-by-request-handler">Do update by request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="do-update-by-request-handler"><fo:page-number-citation ref-id="do-update-by-request-handler"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="normalize-page-condition">Normalize page condition by request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="normalize-page-condition"><fo:page-number-citation ref-id="normalize-page-condition"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="common-usage-form-flow">9.2. Common usage of form flow</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="common-usage-form-flow"><fo:page-number-citation ref-id="common-usage-form-flow"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="best-snippet-way">9.3. The best way of implementing a snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="best-snippet-way"><fo:page-number-citation ref-id="best-snippet-way"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.best-snippet-way" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="perform-queries-simple">Perform queries as simple as possible</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="perform-queries-simple"><fo:page-number-citation ref-id="perform-queries-simple"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="make-use-of-parallelRowRender">Make use of ParallelRowRender</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="make-use-of-parallelRowRender"><fo:page-number-citation ref-id="make-use-of-parallelRowRender"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="cache-data">Cache your data</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="cache-data"><fo:page-number-citation ref-id="cache-data"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="avoid-duplicated-query">Avoid duplicated query</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="avoid-duplicated-query"><fo:page-number-citation ref-id="avoid-duplicated-query"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="prepare-snippet-instance">Prepare snippet instance(set default value) by InitializableSnippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="prepare-snippet-instance"><fo:page-number-citation ref-id="prepare-snippet-instance"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="selector-x-convention">"x-" convention selector</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="selector-x-convention"><fo:page-number-citation ref-id="selector-x-convention"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="remove-rather-than-add">Remove contents rather than add contents for conditional rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="remove-rather-than-add"><fo:page-number-citation ref-id="remove-rather-than-add"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="asta4d-reference">III. Reference</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="asta4d-reference"><fo:page-number-citation ref-id="asta4d-reference"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.asta4d-reference" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-template">10. Details of Template</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-template"><fo:page-number-citation ref-id="chapter-detail-template"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-detail-template" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1195">10.1. Supported tags</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1195"><fo:page-number-citation ref-id="d0e1195"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e1195" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1199">afd:extension</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1199"><fo:page-number-citation ref-id="d0e1199"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1218">afd:block</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1218"><fo:page-number-citation ref-id="d0e1218"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1264">afd:embed</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1264"><fo:page-number-citation ref-id="d0e1264"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1287">afd:snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1287"><fo:page-number-citation ref-id="d0e1287"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1323">afd:group</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1323"><fo:page-number-citation ref-id="d0e1323"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1336">afd:comment</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1336"><fo:page-number-citation ref-id="d0e1336"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1349">afd:msg</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1349"><fo:page-number-citation ref-id="d0e1349"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1368">10.2. Additional</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1368"><fo:page-number-citation ref-id="d0e1368"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-snippet">11. Details of snippet class</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-snippet"><fo:page-number-citation ref-id="chapter-detail-snippet"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-detail-snippet" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1445">11.1. Rendering APIs</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1445"><fo:page-number-citation ref-id="d0e1445"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e1445" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1451">Create and add Renderer instance</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1451"><fo:page-number-citation ref-id="d0e1451"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="css-selector">CSS Selector</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="css-selector"><fo:page-number-citation ref-id="css-selector"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1813">Render text</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1813"><fo:page-number-citation ref-id="d0e1813"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1826">Render DOM attribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1826"><fo:page-number-citation ref-id="d0e1826"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1888">Clear an Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1888"><fo:page-number-citation ref-id="d0e1888"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1900">Render raw Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1900"><fo:page-number-citation ref-id="d0e1900"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1912">Arbitrary rendering for an Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1912"><fo:page-number-citation ref-id="d0e1912"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1929">Recursive rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1929"><fo:page-number-citation ref-id="d0e1929"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1937">Debug renderer</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1937"><fo:page-number-citation ref-id="d0e1937"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1947">Missing selector warning</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1947"><fo:page-number-citation ref-id="d0e1947"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1962">List rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1962"><fo:page-number-citation ref-id="d0e1962"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2013">11.2. Other things about snippet and rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2013"><fo:page-number-citation ref-id="d0e2013"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e2013" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2016">Nested snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2016"><fo:page-number-citation ref-id="d0e2016"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2029">InitializableSnippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2029"><fo:page-number-citation ref-id="d0e2029"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2039">Component rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2039"><fo:page-number-citation ref-id="d0e2039"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2064">SnippetInterceptor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2064"><fo:page-number-citation ref-id="d0e2064"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2067">SnippetExtractor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2067"><fo:page-number-citation ref-id="d0e2067"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2070">SnippetResolver</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2070"><fo:page-number-citation ref-id="d0e2070"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2073">SnippetInvoker</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2073"><fo:page-number-citation ref-id="d0e2073"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-var-injection">12. Variable injection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-var-injection"><fo:page-number-citation ref-id="chapter-detail-var-injection"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-detail-var-injection" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-context">12.1. Context</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-context"><fo:page-number-citation ref-id="vi-context"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.vi-context" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2082">Context/WebApplicationContext</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2082"><fo:page-number-citation ref-id="d0e2082"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-scope">Scope</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-scope"><fo:page-number-citation ref-id="vi-scope"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-ContextBindData">ContextBindData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-ContextBindData"><fo:page-number-citation ref-id="vi-ContextBindData"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-injection">12.2. Injection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-injection"><fo:page-number-citation ref-id="vi-injection"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.vi-injection" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-contextdata">@ContextData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-contextdata"><fo:page-number-citation ref-id="vi-contextdata"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-contextdataset">@ContextDataSet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-contextdataset"><fo:page-number-citation ref-id="vi-contextdataset"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-ContextDataFinder">ContextDataFinder</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-ContextDataFinder"><fo:page-number-citation ref-id="vi-ContextDataFinder"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2364">DataConvertor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2364"><fo:page-number-citation ref-id="d0e2364"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2367">ContextDataHolder</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2367"><fo:page-number-citation ref-id="d0e2367"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-url-rule">13. URL rule</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-url-rule"><fo:page-number-citation ref-id="chapter-detail-url-rule"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-detail-url-rule" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="rule-apis">13.1. Rule apis</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="rule-apis"><fo:page-number-citation ref-id="rule-apis"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.rule-apis" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="UrlMappingRuleInitializer">UrlMappingRuleInitializer</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="UrlMappingRuleInitializer"><fo:page-number-citation ref-id="UrlMappingRuleInitializer"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2448">Handy rules</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2448"><fo:page-number-citation ref-id="d0e2448"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2569">13.2. Request handler result process</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2569"><fo:page-number-citation ref-id="d0e2569"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.d0e2569" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2574">Content provider</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2574"><fo:page-number-citation ref-id="d0e2574"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2577">Result transforming</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2577"><fo:page-number-citation ref-id="d0e2577"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2580">Request handler chain</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2580"><fo:page-number-citation ref-id="d0e2580"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-form-flow">14. details of form flow</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-form-flow"><fo:page-number-citation ref-id="chapter-detail-form-flow"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-detail-i18n">15. i18n</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-detail-i18n"><fo:page-number-citation ref-id="chapter-detail-i18n"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-detail-i18n" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-message">15.1. message stringization</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-message"><fo:page-number-citation ref-id="i18n-message"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.i18n-message" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-I18nMessageHelper">I18nMessageHelper</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-I18nMessageHelper"><fo:page-number-citation ref-id="i18n-I18nMessageHelper"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-MessagePatternRetriever">MessagePatternRetriever</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-MessagePatternRetriever"><fo:page-number-citation ref-id="i18n-MessagePatternRetriever"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-default-locale-decision">Default locale</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-default-locale-decision"><fo:page-number-citation ref-id="i18n-default-locale-decision"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-afd-msg">afd:msg</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-afd-msg"><fo:page-number-citation ref-id="i18n-afd-msg"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-file-search">15.2. file search order</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-file-search"><fo:page-number-citation ref-id="i18n-file-search"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="overview">16. Asta4dServlet and configuration</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="overview"><fo:page-number-citation ref-id="overview"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.overview" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2799">16.1. Asta4dServlet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2799"><fo:page-number-citation ref-id="d0e2799"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2841">16.2. Configuration file</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2841"><fo:page-number-citation ref-id="d0e2841"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chapter-integration-spring">17. Integration with Spring</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="chapter-integration-spring"><fo:page-number-citation ref-id="chapter-integration-spring"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.asta4d-user-guide-book.chapter-integration-spring" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="integrate-spring-ioc">17.1. Integrate with Spring IOC</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="integrate-spring-ioc"><fo:page-number-citation ref-id="integrate-spring-ioc"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="integrate-spring-mvc">17.2. Integrate with Spring MVC</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="integrate-spring-mvc"><fo:page-number-citation ref-id="integrate-spring-mvc"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="titlepage" language="en" format="1" initial-page-number="1" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="asta4d-introduction"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">Part I. Introduction</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Asta4D is a web application framework which is friendly to designer and flexible to developer. Asta4D affords
      high productivity than traditional MVC architecture by View First architecture. It also allows front-end engineers 
      and back-end engineers work independently without interference by separating rendering logic from template files.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Asta4D is inspired by lift which is a famous scala web application framework and it is developed by astamuse company Ltd.
      locating at Tokyo Japan. We are concentrating on global innovation support and developing Asta4D for our own services.
      Currently, Asta4D is driving our new service development.
      </fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-overview"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">1. Overview</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e46"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Why Asta4D</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">1.1 Why Asta4D</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the past decade, plenty of Java based web application frameworks are generated. Especially the MVC 
    architecture and JSP tag libs (or other traditional template technologies) that has greatly released our productivity. 
    But unfortunately, we are still suffering from the following situations:
    </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e51"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e52"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>The designers or front-end engineers are keeping complaining the mixed-in dynamic code, as they disturb 
        their efforts of redesigning the page style or structure. And in the mean time, the back-end developers are also 
        complaining that the front-end guys break the working page frequently,  because redesign or the new design is hard 
        to merge due to the huge cost of source refactorying. </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e56"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>The developers are complaining about the poor functionalities of template language which they are using 
        and tired from the various magic skills for complex rendering logic.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e60"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>The developers are discontented with the counterproductivity of traditional MVC architecture and desire a more efficient 
        approach.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="d0e64"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">How Asta4D helps us</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">1.2 How Asta4D helps us</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D is our solution to combat those issues. Thanks to lift, from where we learn a lot. We designed Asta4D complying
    with the following points:
    </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e69"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e70"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Separate template and rendering logic</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D affords front-end engineers a friendly environment by separating rendering logic from template files which
        are pure html files. At the mean time, back-end engineers can use the powerful Java language to implement the rendering
        logic without being suffering from the "poor and sometimes magic" template languages.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e76"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Testable rendering logic</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All of the rendering logic in Asta4D is testable and developers can simply test them by writing simple junit cases, 
        which could replace over than half of selenium tests</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e82"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>High security of being immune from cross-site(XSS/CSRF)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D is, by nature, immune from cross-site(XSS/CSRF) problems. You do not need to take care of cross-site any more. 
        All the rendered value would be escaped by default and your clients have no chance to put malicious contents to your server.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e88"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>View first</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D also affords higher productivity than traditional MVC architecture by View First mechanism. And it is also easier 
        to change than traditional MVC architecture.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e94"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Isolate side effect with request handler</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D imports the conception of "side-effect" from functional programming languages and separating the "side-effect"
        by request handlers, which afford more flexibility on page rendering because the view layer is side-effect free now. Therefore
        Asta4D allows parallel page rendering in multiple threads as a built-in feature.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e100"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Advanced MVC</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D affords developers a evolved MVC architecture which is more clarified for the duty of each application layer than
        the traditional MVC architecture. 
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="d0e106"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">What does the name of "Asta4D" mean</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">1.3 What does the name of "Asta4D" mean</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The name of Asta4D is from our company's name: astamuse. We explain the "4D" as following ways:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e111"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e112"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>For Designer</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D consider the design friendliness as the most important factor of itself. We hope web designers can fulfil their
        maximum potential of creativity without squandering their time on the back-end technologies which they could never be adept at.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e118"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>For developer</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We hope Asta4D can help developers to achieve their work more easily. Developers would never be afflicted with complex
        rendering logic because they can use powerful Java language to do whatever they want since the rendering has been split from
        template files. View first also releases developers from the cumbersome MVC architecture, now they have more time to have a cup
        of coffee.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e124"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>4 Dimension</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We believe that Asta4D can act as a wormhole that connects the front-end and the back-end. We can move quicker by Asta4D just
        like we are going through the 4 dimensional space.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="asta4d-user-guide"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">Part II. User Guide</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-Inheritable-template"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">2. Flexible template</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="inheritable-template"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Inheritable template</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">2.1 Inheritable template</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The template of Asta4D is inheritable, child template can override, append or insert content to certain place
      in parent template. Let's see a sample:
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e141"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e144">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;html&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;head&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
           
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block2"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;title&gt;</fo:inline>extension sample<fo:inline font-weight="bold" color="#3F7F7F">&lt;/title&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/head&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;body&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>content<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/body&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/html&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 2.1 parent.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Child template can declare inheritance by "afd:extension" and overriding can be declared by "afd:block":</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="template-child"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e151">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">append</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">insert</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block2"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">override</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content "</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates/embed.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> &gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>   

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 2.2 child.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      "afd:block" support 3 types action: insert, append and override. 
      </fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      In the <fo:basic-link internal-destination="template-child"><fo:inline>Example 2.2, “child.html”</fo:inline></fo:basic-link>, there is an additional declaration of including by "afd:embed" which embed 
      the target file to the current place of the current file. Let's see the embed.html:
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e160"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e163">

    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">append</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"embed.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>good embed<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 2.3 embed.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The "afd:block" declaration in the embeded target file is available after the content of target file is inserted into the
      <fo:basic-link internal-destination="template-child"><fo:inline>Example 2.2, “child.html”</fo:inline></fo:basic-link>, all "afd:block" tags will be treated as overriding(inserting/appending) to the parent template
      and the contents out of "afd:blocks" will be inserted at the place where the "afd:embed" is declared.
      </fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After all the template files are merged, we will get the following result:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e172"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e175">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;html&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;head&gt;</fo:inline>   
       
    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- block1 --&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"embed.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
  
    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- block2 --&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;title&gt;</fo:inline>extension sample<fo:inline font-weight="bold" color="#3F7F7F">&lt;/title&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/head&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;body&gt;</fo:inline>   
  
    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- content --&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
  
    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- embed --&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>good embed<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/body&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/html&gt;</fo:inline>  

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 2.4 The result of template merging:</fo:block></fo:block></fo:block></fo:block><fo:block id="parametrized-embedding"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Parametrized embedding</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">2.2 Parametrized embedding</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Extra parameters can be passed to the target embeded file by specifying the DOM attribute of "afd:embed" when we
      are embeding files.
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e182"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e185">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/xxx/showList.html"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">limit</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"30"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 2.5 Sample of parametrized embeding:</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The "limit" parameter can be accessed by variable injection in the rendering logic of showList.html, by which we can
      parameterize the embeding. This feature is very useful for creating a page component which encapsulates common
      html snippets and can be controlled by the passed parameters. Basically, embeding a file in a template file
      is similar to calling a function with(or without) arguments. Especially, the parameters are not limited to
      specified static values in the template file, they can be valued dynamicaly at runtime too. Further, the
      type of parameters is not restricted to the stringizable types such as String or Integer/Long, arbitrary Java type
      can be specified dynamically at runtime. See the reference of Renering logic to learn more details. 
      </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
  Simply, the idea of Asta4D's template system is akin to the traditional OOP model, the parent and child templates can be 
  regarded as parent/child classes and the block can be viewed as a overridable virtual method. The embed external files can
  be also treated as funcation calling. As a matter of fact, since arbitrary type of value can be passed to the embed files, 
  there is actually no difference between Asta4D's embeding and common function calling.
  </fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="renderer"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">3. Renderer: easy to use, secure, testable</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="split-rendering"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Split rendering logic from template</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">3.1 Split rendering logic from template</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    There is no dynamic code in a template file. An Asta4D template file is always a pure HTML file which can be easily 
    maintained by front-end developers, it is very design friendly and we can reduce the workload for source 
    refactoring by over 90%.
    </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e199"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e200"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Declare snippet class in template file</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e203"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e206">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;section&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;article&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"SimpleSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>dummy text<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:snippet</fo:inline> <fo:inline font-weight="bold" color="#7F007F">render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"SimpleSnippet:setProfile"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>  
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>name:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>dummy name<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>age:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>0<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:snippet&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/article&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/section&gt;</fo:inline>

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.1 Sample of snippet declaration:</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        The "afd:render" attribute in div tag declares a Java class which is in charge of the concrete rendering logic, such Java
        class is usually called as a snippet class. A snippet class can be declared by a "afd:snippet" tag too, as you have seen
        in above sample. The rendering logic is secluded to independent Java classes by snippet declaration and it is not necessary
        to learn any new template language for back-end developers. The back-end guys can achieve all the rendering logic easily
        by powerful Java language which they have been adept to, no learning costs, no magic codes, succinct Java source only.
        </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e211"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Implement a snippet class</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e214"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e217">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> SimpleSnippet {  
  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(String name) {  
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (StringUtils.isEmpty(name)) {  
            name = <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"Asta4D"</fo:inline>;  
        }
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"div"</fo:inline>, name);  
    }  
  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer setProfile() {  
        Renderer render = Renderer.create(); 
        render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"p#name span"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"asta4d"</fo:inline>);  
        render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"p#age span"</fo:inline>, 20);  
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> render;  
    }  
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.2 Sample of snippet class:</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        The Renderer class is provided by framework to declare rendering actions. Renderer uses traditional CSS selector to
        reference the rendering target and receive the rendering value at the same time, amazing and powerful.
        </fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the above template file and snippet class are executed, we would get the following result:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e224"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e227">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;section&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;article&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>Hello Asta4D<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline>  
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>name:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>asta4d/span&gt;<fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>age:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>20<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/article&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/section&gt;</fo:inline>

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.3 Result of snippet execution:</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Asta4D introduces 4 extra tags to the html template file: afd:extension, afd:block, afd:embed, afd:snippet, which will not
    disturb most html editors, accordingly Asta4D is extremely friendly to front-end engineers. On the other hand, we can see
    that all the rendering logic is fulfiled by Java code and the back-end engineers can compose their back-end logic and rendering logic
    very smoothly without magic skills and extra learning costs, which means highly boost of productivity.
    </fo:block></fo:block><fo:block id="render-to-page"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Render data to page</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">3.2 Render data to page</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block font-style="italic">Be careful of "ElementUtil.parseAsSingle" which would cause cross-site issues. Basically the parseAsSingle api is not recommended for
            common use. See more at<fo:basic-link internal-destination="immune-from-xss"><fo:inline>Section 3.3, “Immune from cross-site hole”</fo:inline></fo:basic-link>.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e238"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e239"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>In Asta4D, all the rendering logic is declared by a Renderer class which accepts various types as rendering value.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e242"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e245">

Renderer render = Renderer.create();
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForInt"</fo:inline>, 12345);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForLong"</fo:inline>, 12345L);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForBool"</fo:inline>, true);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForStr"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a str"</fo:inline>);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForNull"</fo:inline>, (Object) null);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForClear"</fo:inline>, Clear);  

<fo:inline font-style="italic" color="#3F5FBF">// NOTE: parseAsSingle is not recommended to use</fo:inline>
Element newChild = ElementUtil.parseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;&lt;/div&gt;"</fo:inline>);  

render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForElementSetter"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ChildReplacer(newChild));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForElement"</fo:inline>, ElementUtil.parseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;eee&lt;/div&gt;"</fo:inline>));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForRenderer"</fo:inline>, Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#value"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"value"</fo:inline>));  

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.4 Sample usage of Renderer</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e247"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>List of data can be rendered via Renderer too:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e250"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e253">

Renderer render = Renderer.create()();  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForInt"</fo:inline>, Arrays.asList(123, 456, 789));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForLong"</fo:inline>, Arrays.asList(123L, 456L, 789L));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForBool"</fo:inline>, Arrays.asList(true, true, false));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForStr"</fo:inline>, Arrays.asList(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"str1"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"str2"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"str3"</fo:inline>));  

<fo:inline font-style="italic" color="#3F5FBF">// NOTE: parseAsSingle is not recommended to use</fo:inline>

Element newChild1 = ElementUtil.parseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;1&lt;/div&gt;"</fo:inline>);  
Element newChild2 = ElementUtil.parseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;2&lt;/div&gt;"</fo:inline>);  

render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForElementSetter"</fo:inline>, Arrays.asList(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ChildReplacer(newChild1), <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ChildReplacer(newChild2)));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForElement"</fo:inline>, Arrays.asList(newChild1, newChild2));  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForRenderer"</fo:inline>, Arrays.asList(123, 456, 789), <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> RowRenderer&lt;Integer&gt;() {  
    <fo:inline color="gray">@Override</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer convert(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> rowIndex, Integer obj) {  
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"id-"</fo:inline> + obj).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#otherId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"otherId-"</fo:inline> + obj);  
    }  
});   

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.5 Sample of list rendering</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e255"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>DOM attribution can be done too:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e258"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e261">

render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"+class"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"yyy"</fo:inline>);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"-class"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"zzz"</fo:inline>);  
  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"+class"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xxx"</fo:inline>);  
  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"value"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"hg"</fo:inline>);  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"href"</fo:inline>, null);  
  
render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#X"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"value"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Date(123456L));

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.6 Sample of DOM attribution rendering</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="immune-from-xss"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Immune from cross-site hole</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">3.3 Immune from cross-site hole</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The previous samples show us that all the operations to DOM are delegated by Renderer except create DOM
    from String value by "ElementUtil#parseAsSingle". As a matter of fact, all the delegated operations cause
    all the rendering values are escaped by force, which means that your system is, by nature, immune from
    cross-site problems if there is no "ElementUtil#parseAsSingle" calling in your system. You do not need
    to be wary of illegal characters by from the clients since all the values will be escaped as HTML compulsorily.
    </fo:block>
    
    On the other hand, according to our practice, it is rarely that you have to call “ElementUtil.parseAsSingle”
    to generate the rendering content from a raw HTML string, so just take care of your usage of this exceptional api
    then you can say bye-bye to the cross-site holes.    
  </fo:block><fo:block id="test-rendering"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Test your rendering logic</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">3.4 Test your rendering logic</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Testing web page is always a complex task and we usually verify rendering results by selenuim which is as a common
    technology. By Asta4D, testable Renderer can replace over than half of selenium tests to simpler junit tests.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    According to the previous samples, all the rendering logic is holded by an instance of Renderer class, so simply,
    we can verify almost rendering logic by testing the returned Renderer instance from the snippet method. 
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e276"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e279">

RendererTester tester = RendererTester.forRenderer(render);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForInt"</fo:inline>), 12345);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForLong"</fo:inline>), 12345L);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForBool"</fo:inline>), true);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForStr"</fo:inline>), <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a str"</fo:inline>);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForNull"</fo:inline>), null);  
Assert.assertEquals(tester.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForClear"</fo:inline>), Clear);  

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">More samples can be found in <fo:basic-link external-destination="url(https://github.com/astamuse/asta4d/blob/develop/asta4d-core/src/test/java/com/astamuse/asta4d/test/unit/RenderTesterTest.java)">source</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(https://github.com/astamuse/asta4d/blob/develop/asta4d-core/src/test/java/com/astamuse/asta4d/test/unit/RenderTesterTest.java)">https://github.com/astamuse/asta4d/blob/develop/asta4d-core/src/test/java/com/astamuse/asta4d/test/unit/RenderTesterTest.java</fo:basic-link></fo:block></fo:footnote-body></fo:footnote></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 3.7 Sample RendererTester</fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="url-mapping"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">4. View first URL mapping and variable injection</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="view-first-mechanism"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">View first</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">4.1 View first</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In Asta4D, we follow the principle of view first rather than the tradition MVC architecture. The declaration of URL rules
    does not need to include a controller and one url can be mapped to one template file directly, which is called as View First.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In Asta4D, URL mapping rules are not managed in a configuration file. The Framework provides a sort of DSL by a set of convinient
    APIs, which means the declaration of Asta4D's URL mapping rule is programmable and it affords much flexibility than the way with a
    static configuration file.    
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Users declare their own URL rules via implementing the interface UrlMappingRuleInitializer of Asta4D:
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e297"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e300">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> UrlRules <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> UrlMappingRuleInitializer {    
    
    <fo:inline color="gray">@Override</fo:inline>    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> initUrlMappingRules(UrlMappingRuleHelper rules) {    
        <fo:inline font-style="italic" color="#3F5FBF">//@formatter:off    </fo:inline>
        rules.add(GET, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/"</fo:inline>)    
             .redirect(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/index"</fo:inline>);    
            
        rules.add(GET, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/redirect-to-index"</fo:inline>)    
             .redirect(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"p:/app/index"</fo:inline>);    
            
        rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/index.html"</fo:inline>);    
        rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/index"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/index.html"</fo:inline>);    
        rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/{name}/{age}"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/variableinjection.html"</fo:inline>)；    
        ...    
    
        <fo:inline font-style="italic" color="#3F5FBF">//@formatter:on    </fo:inline>
    }
}

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.1 Sample of declaring url rules:</fo:block></fo:block></fo:block></fo:block><fo:block id="url-rule-grammer"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">The grammer of URL rule and path variable</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">4.2 The grammer of URL rule and path variable</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The grammer of Asta4D's URL rule is almost the same as Spring MVC's URL mapping rule and the parts surrounded by braces are 
    treated as path variables which can be retrieved in following process(in snippet classes or request handlers).
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Further, extra path variables can be declared in a url rule by calling the method of "var" as following:
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e309"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e312">

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/{name}/{age}"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/variableinjection.html"</fo:inline>)  
     .var(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"extraVar"</fo:inline>, 1234);  

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.2 Sample of declaring extra path variable:</fo:block></fo:block></fo:block></fo:block><fo:block id="variable-injection"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Variable Injection</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">4.3 Variable Injection</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Asta4D implements a variable injection mechanism which is very closed to Spring MVC, all of the instance fields 
    and method parameters in the implementation of snippet classes can be injected automatically by framework.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Further, all the snippet classes are singleton in request scope.In other words, there will be only one istance of any 
    snippet class in a single request scope regardless of how many times the snippet class is called. Let us see some samples
    of variable injection in the snippet class.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e321"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e322">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    
    
    <fo:inline color="gray">@ContextData</fo:inline>    
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String value; <fo:inline font-style="italic" color="#3F5FBF">// (1)    </fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> id;    
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String resolvedValue;    
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> <fo:inline font-weight="bold" color="#7F0055">int</fo:inline> count = 0;    

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    @ContextData indicates that the instance field "value" need to be injected after the instance of InitSnippet is created. 
    Since the snippet instance is singeleton in the current request scope, the instance field "value" will be injected and 
    initialized only once in the current request scope. The framework will search a variable named "value" in all the available
    variable scopes and inject the found value. The name of "value" is decided by the field name by default and can be
    sepcified by extra declaration(see the following samples).
    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.3 </fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e326"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e327">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    

    <fo:inline color="gray">@ContextData</fo:inline>    
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> setId(<fo:inline font-weight="bold" color="#7F0055">long</fo:inline> id) {　<fo:inline font-style="italic" color="#3F5FBF">//(3)    </fo:inline>
        <fo:inline font-weight="bold" color="#7F0055">this</fo:inline>.id = id;    
    }    

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Instance field can be injected via setter methods too.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.4 </fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e331"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e332">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    
    
    <fo:inline color="gray">@Override</fo:inline>    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> init() <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> SnippetInvokeException { <fo:inline font-style="italic" color="#3F5FBF">//(2)    </fo:inline>
        resolvedValue = value + <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"-resolved"</fo:inline>;    
        count++;    
    }  

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The init method of InitializableSnippet is being implemented. This is not necessary but if a snippet class implements 
    the interface of InitializableSnippet, the init method will be called once after all the instance fields are injected,
    by which customized snippet initial logic can be performed.
    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.5 </fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e336"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e337">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    

    <fo:inline font-style="italic" color="#3F5FBF">// (4)    </fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer getPathVarName(    
    <fo:inline color="gray">@ContextData(scope = WebApplicationContext.SCOPE_PATHVAR)</fo:inline>    
    <fo:inline font-weight="bold" color="#7F0055">int</fo:inline> count) {    
    }

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Variable injection on snippet method. In this sample the extra search scope are delcared, which cause framework searches
    a variable named "count" in the path variable scope. As the same as the injection on instance field, the searching variable
    name is decided by the parameter name by default.
    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.6 </fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e341"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e342">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    

    <fo:inline font-style="italic" color="#3F5FBF">// (5)    </fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer getQueryParamName(    
    <fo:inline color="gray">@ContextData(name = "var", scope = WebApplicationContext.SCOPE_QUERYPARAM)</fo:inline>    
    String name) {    
    }    

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In this sample, an extra variable name and search scope are declared, the framework will search a variable named "var" in the
    request parameters.
    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.7 </fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e346"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e347">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {    

    <fo:inline font-style="italic" color="#3F5FBF">// (6)    </fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer getDefaultName(String name) {    
    } 

}    

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    There is a difference between instance field injection and method parameter injection. A instance field without @ContextData
    annotation will not be injected, but for method paramters, all the paramters will be injected compulsorily. In this sample,
    the framework will search a variable named "name" in all the available scopes as following order:
    </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e351"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e352"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>HTML tag attribution(SCOPE_ATTR)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Trace back to the top tag of the current HTML document recursively. This scope is only available to the snippet method.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e357"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>path variable(SCOPE_PATHVAR)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e360"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request parameter(SCOPE_QUERYPARAM)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e363"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>flash variable(SCOPE_FLASH)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The variables passed from one request to another request, usually acrross a redirect.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e368"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>cookie(SCOPE_COOKIE)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e371"><fo:list-item-label end-indent="label-end()"><fo:block>6.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request hearder(SCOPE_HEADER)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e374"><fo:list-item-label end-indent="label-end()"><fo:block>7.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request attribute(SCOPE_REQUEST)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e377"><fo:list-item-label end-indent="label-end()"><fo:block>8.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>session(SCOPE_SESSION)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e380"><fo:list-item-label end-indent="label-end()"><fo:block>9.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>global(SCOPE_GLOBAL)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A global static variable pool</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      This search order is applied to the instance field injection too except that the first scope of HTML tag attribution is not available.
    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 4.8 </fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-side-effect"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">5. Side effect and request handler</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e390"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">The role with responsibility to http request: Request Handler</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">5.1 The role with responsibility to http request: Request Handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Even Asta4D complies with the principle of view first, there is still a role similar with the controller in MVC
    architecture, such role is called request handler. We believe that there should be a role who takes responsiblity
    of a certain http request and such role can be considered as an alternative to controller of MVC in some situations
    too.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    According to the view first rule, a request handler can be ignored in most cases. You can also assume that there is
    is a default request handler which navigates all the http requests to the corresponding template files(The real 
    story is more complex but you can try to understand the theory conceptually by this way).
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Now the question is when we need a request handler? Before we can answer this question, we have to discuss the conception
    of "side effect".
    </fo:block></fo:block><fo:block id="d0e399"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Side effect of system operations</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">5.2 Side effect of system operations</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    A system always afford users various operations such as query, update, etc. All of these operations will affect the status
    of system in various ways. In Asta4D, we say that there are two types of action in a system, one is with “side effect”, 
    another one is without “side effect”. “actions with side effect” are ones that will change the system status once they are
    performed. For instance, for the same URL, a login request (if succeeded) will cause a client’s privilege to be changed and 
    the client could probably get a different page view from what the client get before login, because of which we say a login 
    request is an action with side effect. Another obvious example is a database update operation. Once an update is committed, 
    all the related clients will get a different output from the result before the update, which is also classified as “an action 
    with side effect”. 
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    How about a query? We consider a query as an operation without side effect, it means that a client will always get the same
    result regardless of how many times the query is executed. Some people may ask how about counting on query times? For counting
    on query times, we can still split the counting and query to two individual operations, one is with side effect and another one
    is without side effect.
    </fo:block></fo:block><fo:block id="d0e406"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Isolate side effect and multi thread rendering</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">5.3 Isolate side effect and multi thread rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    We believe the actions with side effect should be managed seriously and we do that by putting all the actions with side effect
    to request handlers so that the view layer is purified and this makes the source more clear and maintainable. This is also means 
    with Asta4D we can easily perform multi thread rendering on a single page because they are now all side-effect free, which is a
    high light function of Asta4D.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In traditional MVC architecture, the responsibility of controller is tangled, a controller does not only handle the duty of altering
    system status(date update), but also takes the responsibility of preparing data for view layer. We often have to expand the database
    session(transaction) to the view layer for handling lazy load issue, which makes transaction management more complicated. Additionally,
    especially for the pages that can be split to relatively individual blocks, hypothetically we can accelerate the page loading
    by retrieving data in multi threads for each block, but in reality it is impossible due to the source complexity and development costs.
    The developers still have to access each data source sequentially to retrieve data for each block even the page is splitable as individual
    blocks.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    For Asta4D, the logic layers of system is clarified by isolating side effects at architecture level. The database session(transaction)
    does no longer need keep opening cross layers, it is clear that the duty of request handler is altering system status but not preparing
    data for view layer. At the mean time, at the view layer, acquiring data and rendering data are performed at the same time, at the same
    place: We access data source and retrieve data in snippet method, and pass the data to Renderer to perform rendering immediately in the
    same snippet method. Further, the complexity can be reduced drastically because all the accesses to certain data are isolated in certain
    snippet methods and there is no cross layer invoking and coupling any more.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    On the other hand, we can simply perform multi thread rendering by calling each snippet method in different threads, which is transparent to
    developer. Because all the side effects has been isolated in request handler layer, we do not need to considerate sync or mutex even we
    are performing multi thread rendering since the view layer is side effect free now.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Let us see how easy we can achieve parallel rendering 
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e419"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e420">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ParallelTest$TestRender:snippetInDiv"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:parallel&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#7F007F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"test"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>xx<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>  
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:snippet</fo:inline> <fo:inline font-weight="bold" color="#7F007F">render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ParallelTest$TestRender:snippetReplaceDiv"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parallel&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#7F007F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"test"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>xx<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:snippet&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      All the snippets declared with parallel(afd:parallel) attribution will not block the http request main thread, the http request main thread
      will wait for the parallel rendering after all the non-parallel rendering finished, then merge the result and output to the client.
      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 5.1 </fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-request-handler"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">6. Impement request handler and url mapping</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e428"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">@RequestHandler</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">6.1 @RequestHandler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is not complicated to implement a request handler. @RequestHandler can be used to annotate a handle
    method in arbitrary Java class which will be treated as a request handler.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e433"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e434">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> LoginHandler {  
  
    <fo:inline color="gray">@RequestHandler</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> LoginFailure doLogin(String flag) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> LoginFailure {  
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (StringUtils.isEmpty(flag)) {  
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> null;  
        }  
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"error"</fo:inline>.equals(flag)) {  
            <fo:inline font-weight="bold" color="#7F0055">throw</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> LoginFailure();  
        }  
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (!Boolean.parseBoolean(flag)) {  
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> LoginFailure();  
        }  
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> null;  
    }  
}  

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Take a look at the parameters of the handle method, the handle method of a request handler accepts parameter injection
      as same as the snippet method. More details can be found at the descriptions of the snippet method.
      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.1 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e438"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">delcare url rule for request handler</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">6.2 delcare url rule for request handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Previously we have introduced how to forward a http request to a certain template file by url mapping. We can declare 
    a request handler for q http request by the same way:
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e443"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e444">

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>)  
     .handler(LoginHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>) <fo:inline font-style="italic" color="#3F5FBF">// (1)  </fo:inline>
     .forward(LoginFailure.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/error.html"</fo:inline>) <fo:inline font-style="italic" color="#3F5FBF">//(2)  </fo:inline>
     .redirect(FurtherConfirm.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/furtherConfirm"</fo:inline>)<fo:inline font-style="italic" color="#3F5FBF">//(3)  </fo:inline>
     .forward(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/success.html"</fo:inline>); <fo:inline font-style="italic" color="#3F5FBF">//(4)  </fo:inline>

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Simply explain:
        <fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e448"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e449"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Forward the request to "/app/handler" to the request handler "LoginHandler".</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e452"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If "LoginHandler" returns a result of "LoginFailure", forward the request to the template file "error.html".</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e455"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If "LoginHandler" returns a result of "FurtherConfirm", redirect the current request to "/app/furtherConfirm" 
            by http code 302(302 is by default).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e458"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If "LoginHandler" does not return a meaningful result(it usually means success by a null return) , forward the request 
            to the template file "success.html".</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.2 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      More verbose details:
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The handler method is used to add a request handler and accepts arbitrary type as the the parameter: an instance of java.lang.Class or an
      arbitrary instance. The framework explains received parameters by the implementation of DeclareInstanceResolver configured by
      WebApplicationConfiguration. Thee default implementation provided by framework follows the following rules to explain the declaration
      of request handler:
      <fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e466"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e467"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If an instance of java.lang.Class is specified, the instance of request handler will be created by invoke "newInstance()"
          on the specified Class.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e470"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If a string is specified, the string will be treated as a class name and an instance of java.lang.Class will be created by 
          calling "Class#forName", then the instance of request handler will be created by invoke "newInstance()" on the created Class.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e473"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>The specified parameter will be treated as a request handler directly if it is neither a Class nor a string. By this rule,
          it is interesting that we can declare an anonymous class as a request handler:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e476"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e477">

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>)  
     .handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Object(){  
        <fo:inline color="gray">@RequestHandler</fo:inline>  
        <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> handle(){  
            <fo:inline font-style="italic" color="#3F5FBF">//  </fo:inline>
        }  
     }); 

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.3 </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
      <fo:inline font-style="italic">The asta4d-spring package also provides a resolver based on Spring IOC container, the request handler instance will be retrieved by
      passing the specified parameter to the "Context#getBean" method of spring container.</fo:inline>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The forward method adds a transforming rule for the result of request handler.There must be a handler method annotated by @RequestHandler and the
    returned value of the handle method is viewed as the result of the request handler, thrown exceptions in the handle method are treated as the result
    too. The framework will attempt to match the result to the expected result specified by forward method then transforms the result to the corresponding
    template file(The real mechanism of result transforming is more complicated and is explained at ...). When the matching attempt is performed, the
    equals method will be used at first, if the equals method returns false and the expected result by forward method is an instance of java.lang.Class,
    "Class#isAssignableFrom" will be utilized, if false again, skip the current forward rule and do the same check on the next forward rule. A forward rule
    without the expected result specified will be viewed as a default rule, if matched forward rule for a result is missing or the request handler returns
    a pointless result(void declaration of handle method or returns null), the default rule will be applied.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The redirect method follows the same rule of forward method except it will cause a 302 redirect(302 is default, 301 can be declared) instead of forwarding
    to a template file.
    </fo:block></fo:block><fo:block id="d0e487"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Default request handler</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">6.3 Default request handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    You can not only declare request handler to a certain url, but also declare global request handlers which is available to
    all the urls and prior to the request handlers declared on certain urls. There is a conception of request handler chain
    for multi handlers, we will explain it in a later chapter.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e492"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e495">

rules.addDefaultRequestHandler(GlobalHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>);  
  
rules.addDefaultRequestHandler(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"authcheck"</fo:inline>, AuthCheckHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>);  

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.4 Default request handler</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    At the second line declaration for AuthCheckHandler, an attribute can be specified at the same time, which cause the declared request handler
    is only available to the rules that declared the same attribute.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e499"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e500">

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>).attribute(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"authcheck"</fo:inline>)  
        ...  

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.5 </fo:block></fo:block></fo:block><fo:block font-style="italic">
    In the framework's internal implementation, a static match rule table will be generated after all the url mapping declaration finished. A global
    request handler that is only available to certain rules will be configured to the the certain url rules only, by which unnecessary performance
    cost is avoid.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In our practice, we found that it is very inconvenient to declare necessary attribute on every rule. In most situations, we will
    want to do something like configure a same default request handler to all the url paths under "/xxx", which can be done by delcaring
    a non attribute default request handler which judges the url pattern by itself, but such way will lose the performance benefit of
    attribute declaration. Thus, we provide an alternative way for this situation: url rule rewrite.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e506"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e507">

rules.addRuleRewriter(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> UrlMappingRuleRewriter() {  
    <fo:inline color="gray">@Override</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> rewrite(UrlMappingRule rule) {  
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(rule.getSourcePath().startsWith(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/privatedata/"</fo:inline>)){  
            rule.getAttributeList().add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"authcheck"</fo:inline>);  
        }  
    }  
});   

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.6 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Please note that, untill now all the introduced configuration for url mapping are achieved by a group of interface called
    HandyRule which convert all the declaration to the instance of UrlMappingRule which is used by framework internally. But in
    the url rule rewritter implementation, developers have to cope with the raw UrlMappingRule which is difficult to understand,
    so complex url rewriting is not appreciated. Basically, the scenario of url rule rewriting is only for add attributes to rules in
    bulk.
    </fo:block></fo:block><fo:block id="d0e511"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Global forward/redirect</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">6.4 Global forward/redirect</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Previously we mentioned that the result of a request handler will be matched in the forward declaration, if there is no matched forward found,
    the global forward rule will be checked.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e516"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e519">

rules.addGlobalForward(PageNotFoundException.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/pagenotfound.html"</fo:inline>, 404);  

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The above source declares that if the result of request handler is PageNotFoundException(Exception is treated as the result of the request handler),
      forward the request to pagenotfound.html by http status code 404.
      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.7 Global forward</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Global redirect can be declared by the same way.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e525"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e528">

rules.addGlobalRedirect(REDIRECT_TO_SOMEWHERE, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/somewhere"</fo:inline>);  

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.8 Global redirect</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The global forward rules are applied before the default forward rule(the forward rule without result) on certain url mapping rule.
    </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e532"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e533">

rules.addGlobalForward(PageNotFoundException.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/pagenotfound.html"</fo:inline>, 404);  

rules.addGlobalRedirect(REDIRECT_TO_SOMEWHERE, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/somewhere"</fo:inline>);  

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>)  
     .handler(LoginHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>) 
     .forward(LoginFailure.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/error.html"</fo:inline>) 
     .redirect(FurtherConfirm.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/furtherConfirm"</fo:inline>)  
     .forward(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/success.html"</fo:inline>);

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 6.9 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In the above sample, the result of LoginHandler will be matched by the following order:
    <fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e537"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e538"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block>LoginFailer</fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e540"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block>FurtherConfirm</fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e542"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block>PageNotFoundException</fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e544"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block>REDIRECT_TO_SOMEWHERE</fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e546"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block>(default-&gt; "success.html")</fo:block></fo:list-item-body></fo:list-item></fo:list-block>
    </fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-adv-request-handler"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">7. Advanced usage of request handler</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This chapter is to show how you can make advanced usage of request handler on various situations.</fo:block><fo:block id="advanced-mvc"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Advanced MVC architecture</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">7.1. Advanced MVC architecture</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Even we emphasize that Asta4D is a view first framework, it is still compatible with MVC architecture. Further, we would say that 
  Asta4D affords an advanced MVC architecture than traditional MVC frameworks by the view first mechanism.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the MVC theory, a controller would act as multi roles in a full request process, from wikipedia, it says: <fo:inline font-style="italic">"A controller 
  can send commands to the model to update the model's state (e.g., editing a document). It can also send commands to its associated 
  view to change the view's presentation of the model (e.g., by scrolling through a document)."</fo:inline> But those are not all in most
  situations, we usually have to do more things in a controller such as querying additional assistant data for page rendering.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By traditional MVC architecture, we often have to expand the transaction from the controller layer across to the view layer to combat
  the lazy load issue, which ugly structure is essentially caused by the tangled controller which holds various unrelated duties.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is also strange that we have to modify our controller's implementation at every time we change the page appearance at view layer.
  Such situation could not satisfy us since the layers are not uncoupled really.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We would say that the traditional controller is indeed a tangled magic container for most logics, a controller will unfortunately
  be coupled to most layers in the system even our initial purpose of MVC is to uncouple our logics. By contrast, Asta4D allows developers
  to really uncouple all the tangled logics easily. Basically we could split the traditional controller's duty to following parts:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e570"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e571"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request handler</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Which takes the responsibilities of all the operations with side-effect.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e576"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>result matching in url rule</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Which dispatches the request to different views according to the result from request handler</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e581"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>snippet class</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Which has the responsibility to render data to the page and also holds the obligation of preparing all the necessary data for
      page rendering.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By above architecture, we could perfectly uncouple our logics by clarifying the obligation of each layer.</fo:block><fo:block font-style="italic">Need sample source ...</fo:block></fo:block><fo:block id="normalize-page-url"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Normalize page url patterns</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">7.2. Normalize page url patterns</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Commonly, we would probably have multiple path patterns for the same template file but we would hope our snippet implementation 
  could deal with a unified pattern, which can be simply achieved by a request handler.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e595"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e598">


rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user/name/{name}"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page"</fo:inline>)

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user/{id}"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page"</fo:inline>)
     .handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Object(){
        <fo:inline color="gray">@RequestHandler</fo:inline>
        <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> preparePage(Context context, Integer id, String name){
            User user = null;
            <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(id != null){
                user = queryUserById(id);
            }<fo:inline font-weight="bold" color="#7F0055">else</fo:inline> <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (name != null){
                user = queryUserByName(name);
            }
            <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(user != null){
                <fo:inline font-style="italic" color="#3F5FBF">//in the snippet class, a @ContextData annotation can by use to retrieve this value by injection</fo:inline>
                context.setData(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page-condition"</fo:inline>, user);
            }
        }
     }).forward(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user-page.html"</fo:inline>);

    </fo:block><fo:inline font-style="italic">Somebody would argue that the above example is apparently a traditional MVC architecture, that is right or wrong. For the most simple situation, if 
    the snippet class will only show the data from entity class User without any extra query, it is true that the above source shows a traditional MVC architecture.
    But for the most situations, the page rendering would require more additional queries, which would be done at the snippet side. Such structure is so far from the
    traditional MVC that we would rather to call it as view first.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.1 Normalize page url</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the above example, we do not cope with the case of user does not exist. The following source shows how we can cope with such situation: </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e604"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e607">


rules.addGlobalForward(PageNotFoundException.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/template/PageNotFound.html"</fo:inline>, 404);
rules.addGlobalForward(Throwable.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/template/UnknownError.html"</fo:inline>, 500);

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user/name/{name}"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page"</fo:inline>)

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user/{id}"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page"</fo:inline>)
     .handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Object(){
        <fo:inline color="gray">@RequestHandler</fo:inline>
        <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> preparePage(Context context, Integer id, String name){
            User user = null;
            <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(id != null){
                user = queryUserById(id);
            }<fo:inline font-weight="bold" color="#7F0055">else</fo:inline> <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (name != null){
                user = queryUserByName(name);
            }
            <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(user == null){
                <fo:inline font-weight="bold" color="#7F0055">throw</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> PageNotFoundException();
            }<fo:inline font-weight="bold" color="#7F0055">else</fo:inline>
                <fo:inline font-style="italic" color="#3F5FBF">//in the snippet class, a @ContextData annotation can by use to retrieve this value by injection</fo:inline>
                context.setData(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"user-page-condition"</fo:inline>, user);
            }
        }
     }).forward(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/user-page.html"</fo:inline>);

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.2 Normalize page url and PageNotFoundException</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See more details at <fo:basic-link internal-destination="normalize-page-condition"><fo:inline>the section called “Normalize page condition by request handler”</fo:inline></fo:basic-link></fo:block></fo:block><fo:block id="rest-ajax"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Restful and ajax</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">7.3. Restful and ajax</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the request which does not require response of html files, such as restful or ajax request, request handler can be used to cope
  with such situation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is a rest() method which does nothing on the current rule by default but can be used as a hint to suggest that the current rule will 
  response customized contents as a restful api. A request handler can return a ContentProvider to supply customized response content. 
  Details of ContenProvider can be found at later chapters, here we only show examples of how to response customized contents.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e619"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e622">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> UpdateHandler {  
  
    <fo:inline color="gray">@RequestHandler</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> ContentProvider doUpdate(String id, String content) {
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (idExists(id)) {
            <fo:inline font-weight="bold" color="#7F0055">try</fo:inline> {
                updateContent(id, content);
                <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> HeaderInfoProvider();
            } <fo:inline font-weight="bold" color="#7F0055">catch</fo:inline> (Exception ex) {
                HeaderInfoProvider header = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> HeaderInfoProvider(500);
                header.addHeader(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"exception"</fo:inline>, ex.getMessage());
                <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> header;
            }
        } <fo:inline font-weight="bold" color="#7F0055">else</fo:inline> {
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> HeaderInfoProvider(404);
        }
    }
}  

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.3 Return header only response</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e624"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e627">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> GetHandler {  
  
    <fo:inline color="gray">@RequestHandler</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> ContentProvider get(String id) {
        Object data = getContent(id);
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (data == null) {
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> HeaderInfoProvider(404);
        } <fo:inline font-weight="bold" color="#7F0055">else</fo:inline> {
            HeaderInfoProvider header = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> HeaderInfoProvider();<fo:inline font-style="italic" color="#3F5FBF">// default to 200</fo:inline>
            header.addHeader(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"Content-Type"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"application/json"</fo:inline>);

            String json = toJson(data);
            BinaryDataProvider binaryData = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> BinaryDataProvider(json.getBytes());
            
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> SerialProvider(header, binaryData);
        }
    }
}  

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.4 Return customized binary data</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For json data, there is a more convenience way to response a json string to client. A json() method can be used on 
  rule declaration to ask the framework to convert the returned result from request handler to a json string automatically.
  the above </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e631"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e634">


<fo:inline font-style="italic" color="#3F5FBF">// in rule declaration</fo:inline>
rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/get"</fo:inline>).handler(GetHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>).json();


<fo:inline font-style="italic" color="#3F5FBF">//the handler implementation</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> GetHandler {  
  
    <fo:inline color="gray">@RequestHandler</fo:inline>  
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Object get(String id) {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> getContent(id);
    }
}  

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.5 Declare json at rule</fo:block></fo:block></fo:block><fo:block font-style="italic">By default, a rest rule will do nothing on the result of handler and a ContentProvider instance is expected, by contrast,
          there is a built-in json transformer for rules which are declared as json. However, developers can still register a customized
          result transformer for rest rules or even register a customized json transformer to override the default built-in implementation.
          See details at <fo:basic-link internal-destination="UrlMappingRuleInitializer"><fo:inline>the section called “UrlMappingRuleInitializer”</fo:inline></fo:basic-link></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Further, since a request handler can access HttpServletResponse instance directly, developer can do more complex customization
  on HttpServletResponse instance directly.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e641"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e644">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> XXXHandler {  
  
    <fo:inline color="gray">@RequestHandler</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> handle(HttpServletResponse response) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> IOException {
        response.setStatus(200);
        response.addHeader(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xxx"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">""</fo:inline>);
        response.getOutputStream().write(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"OK"</fo:inline>.getBytes());
    }
}  

    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.6 access HttpServletResponse directly</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are two built-in customized request handlers for handler static resouce files and mapping generic path template files.
  See the next section.</fo:block></fo:block><fo:block id="handle-static-resource"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Handle static resouce files</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">7.4. Handle static resouce files</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most simple way to handling static resource files is mapping their path in web.xml then they will be serviced by the servlet container.
  But Asta4D still affords a way to handle them at framework level.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e653"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e656">


rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/js/**/*"</fo:inline>).handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> StaticResourceHandler());

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/img/**/*"</fo:inline>).handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> StaticResourceHandler(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/resource/img"</fo:inline>));

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/favicon.ico"</fo:inline>).handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> StaticResourceHandler(/img/favicon.ico));


    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.7 handler static files</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The wild-card "/**/*" in source path is necessary if you want to mapping all the urls with same path prefix to a certain base folder. The base path
  parameter in constructor of StaticResourceHandler is not necessary. if the base path is not specified, StaticResourceHandler will treat the part before
  the wild-card "/**/*" in source path as the base path.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">StaticResourceHandler can be customized by path var configuration or overriding some protected methods by extending. See details in javadoc of 
  StaticResourceHandler.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e662"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e665">


<fo:inline font-style="italic" color="#3F5FBF">// by path var</fo:inline>

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/js/**/*"</fo:inline>)
    .var(StaticResourceHandler.VAR_CONTENT_TYPE, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"text/javascript"</fo:inline>) 
    .handler(StaticResourceHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>);

<fo:inline font-style="italic" color="#3F5FBF">// by overring</fo:inline>
rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/js/**/*"</fo:inline>).handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> StaticResourceHandler(){
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> decideCacheTime(String path) {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> 24 * 60 * 60 * 1000; <fo:inline font-style="italic" color="#3F5FBF">//force cache 24 hours</fo:inline>
    }
    
});


    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that it is not necessary to specify content type for most situations because StaticResourceHandler will guess 
    the content type by file name extension automatically.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.8 customize StaticResourceHandler</fo:block></fo:block></fo:block></fo:block><fo:block id="handle-generic-path"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Handle generic path template files</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">7.5. Handle generic path template files</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Basically Asta4D asks developers to declare the matching relationship between url and template file one by one, but it still allows
  to declare a generic path matching for all files in same folder, which can be achieved by GenericPathTemplateHandler.</fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e674"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e677">


rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/pages/**/*"</fo:inline>).handler(GenericPathTemplateHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>);


    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As same as the StaticResourceHandler, the wild-card "/**/*" is necessary and the base path parameter of constructor can be ignored.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 7.9 handler template files in bulk</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-form-flow"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">8. Built in form flow</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block font-style="italic">(Being written. See the online sample: <fo:basic-link external-destination="url(http://asta4dsample-xzer.rhcloud.com/form)">Form Flow Sample</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(http://asta4dsample-xzer.rhcloud.com/form)">http://asta4dsample-xzer.rhcloud.com/form</fo:basic-link></fo:block></fo:footnote-body></fo:footnote>)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D affords built-in form flow to accelerate development of traditional form process. Asta4D's form flow mechanism supports 
  various flow style and supplies several classical flow style as built-in. For most cases, the developers only need to implement the init 
  and update method to complete the entire form related logic.</fo:block><fo:block id="d0e691"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Startup</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">8.1. Startup</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e691"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e694">Form and form field</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e694"><fo:page-number-citation ref-id="d0e694"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e712">Form handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e712"><fo:page-number-citation ref-id="d0e712"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.d0e691.d0e712" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e715">Brief of BasicFormFlowHandlerTrait and FormProcessData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e715"><fo:page-number-citation ref-id="d0e715"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e779">built-in flows</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e779"><fo:page-number-citation ref-id="d0e779"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e820">Implement a real form flow handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e820"><fo:page-number-citation ref-id="d0e820"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e873">HTML template of form</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e873"><fo:page-number-citation ref-id="d0e873"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e894">Form snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e894"><fo:page-number-citation ref-id="d0e894"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e919">Cascade form POJO and array field</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e919"><fo:page-number-citation ref-id="d0e919"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e694"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Form and form field</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Form and form field</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In a form process, the basic conception is a POJO which represents the whole form data. In Asta4D, we use @Form annotation to annotate a
      POJO as a form object which can be handled by the the form flow.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also, there must be fields to represent the concrete data of a form, which can also be annotated by a set of form field annotations.
      There are several built-in form field annotations for common cases and you can implement your own form field annotation too(See <fo:basic-link internal-destination="chapter-detail-form-flow"><fo:inline>Chapter 14, <fo:inline font-style="italic">details of form flow</fo:inline></fo:inline></fo:basic-link>
      for more details about form field annotation).</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e703"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e706">

<fo:inline color="gray">@Form</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> PersonForm <fo:inline font-weight="bold" color="#7F0055">extends</fo:inline> Person{

    <fo:inline color="gray">@Hidden</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Integer getId() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.getId();
    }

    <fo:inline color="gray">@Input</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> String getName() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.getName();
    }
    
    <fo:inline color="gray">@Select(name = "bloodtype")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> BloodType getBloodType() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.getBloodType();
    }

}

        </fo:block><fo:inline font-style="italic">The @Hidden represents a hidden input of html, @Input represents a traditional common input and @Select is matched to the pull-down element in html. 
                We also recommend to implement the form POJO by extending from the existing entity POJO, see details at <fo:basic-link internal-destination="common-usage-form-flow"><fo:inline>Section 9.2, “Common usage of form flow”</fo:inline></fo:basic-link>.
        </fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.1 annotations on form POJO and form fields</fo:block></fo:block></fo:block></fo:block><fo:block id="d0e712"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Form handler</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Form handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e712"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e715">Brief of BasicFormFlowHandlerTrait and FormProcessData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e715"><fo:page-number-citation ref-id="d0e715"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e779">built-in flows</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e779"><fo:page-number-citation ref-id="d0e779"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e820">Implement a real form flow handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e820"><fo:page-number-citation ref-id="d0e820"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e715"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Brief of BasicFormFlowHandlerTrait and FormProcessData</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After we defined our form POJO, we need to declare a request handler to handle the form request. There is an BasicFormFlowHandlerTrait which affords most
                necessary common operations of form process.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The BasicFormFlowHandlerTrait is implemented as an interface with various default methods which afford a template that allows developer to override any 
          method for customization.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To define a form flow, we need to plan a flow graph which describes how the flow flows.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(before first) &lt;--&gt; step 1 &lt;--&gt; step2 &lt;--&gt; step3 &lt;--&gt; ...</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Assume we have a flow as above, note that there can be cycles or branches, which means you can go any step from any other step in the flow graph, 
          what you need to do is to define how the step should be transfered. For example, the following flow graph is possible:</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(before first) --&gt; step 1 &lt;--&gt; step2 &lt;--&gt; step3 --&gt; (finish)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(before first) --&gt; step 1 &lt;--&gt; step4 &lt;--&gt; step5 --&gt; (finish)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">step 1 &lt;-- step3</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">step 1 &lt;-- step5</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To describe the step transfer, there is an interface called FormProcessData which defined the basic step information:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e738"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e741">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">interface</fo:inline> FormProcessData {

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getStepExit();
    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getStepBack();

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getStepCurrent();

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getStepFailed();

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getStepSuccess();

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> String getFlowTraceId();

}

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.2 FormProcessData</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The FormProcessData requires the developer to tell how to handle a form submit, the name of current step, the target step for success and the target for
                failing, also want to know where to go if user want to go back to the previous step or exit. The getFlowTraceId will return a id which represents
                all the state of current flow(can be considered as a "session" id for the current in-progress form flow).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The default implementation of FormProcessData is SimpleFormProcessData which retrieves the step information from the submitted http query parameters 
                which can be put into the HTML template files as a part of the submitting form. However developers can always decide how to retrieve the step information by 
                implement their own FormProcessData.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e747"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e750">

<fo:inline color="gray">@ContextDataSet</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> SimpleFormProcessData <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> FormProcessData {

    <fo:inline color="gray">@QueryParam(name = "step-exit")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String stepExit;

    <fo:inline color="gray">@QueryParam(name = "step-back")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String stepBack;

    <fo:inline color="gray">@QueryParam(name = "step-current")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String stepCurrent;

    <fo:inline color="gray">@QueryParam(name = "step-failed")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String stepFailed;

    <fo:inline color="gray">@QueryParam(name = "step-success")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String stepSuccess;

    <fo:inline color="gray">@QueryParam(name = FormFlowConstants.FORM_FLOW_TRACE_ID_QUERY_PARAM)</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String flowTraceId;
}

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.3 SimpleFormProcessData</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If we use the default SimpleFormProcessData, we will usually include the following HTML in our template file side:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e754"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e757">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-current"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"confirm"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-failed"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-success"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"complete"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>send<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-back"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>back<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-exit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"exit"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>cancel<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.4 HTML for SimpleFormProcessData</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The details of how the BasicFormFlowHandlerTrait process the submitted form data and transfer the step can be found at the JavaDoc of BasicFormFlowHandlerTrait.
                Here we will introduce the points that what the developers have to do to decide the rule of a form flow. There are 3 methods should be overridden for a certain
                flow rule:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e761"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e762"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>String createTemplateFilePathForStep(String step)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">decide how to convert a step to the corresponding target template file path</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e767"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>boolean skipStoreTraceData(String currentStep, String renderTargetStep, FormFlowTraceData traceData)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">decide whether the flow trace data should be stored</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e772"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>boolean passDataToSnippetByFlash(String currentStep, String renderTargetStep, FormFlowTraceData traceData)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">decide how to pass the form data for rendering to snippet, by flash scope or not.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For most common situations, all the above things can be decided as general rules in the user project, so that a common parent class can be utilized to perform 
                the common assumption. There are two built-in flows representing the classical situations: OneStepFormHandlerTrait and ClassicalMultiStepFormFlowHandlerTrait. 
                Those two built-in interfaces will be introduced in the next section and can be considered as reference implementation of how to design and decide a form flow. 
                User project is always recommended to extend from those two built-in flows rather than the basic mechanism trait BasicFormFlowHandlerTrait.
          </fo:block></fo:block><fo:block id="d0e779"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">built-in flows</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are two built-in handler traits to handle the most common situations of the form flow, which are OneStepFormHandlerTrait and 
                ClassicalMultiStepFormFlowHandlerTrait.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The OneStepFormHandlerTrait represents a most simple form process: there is a single input page, after submit, the submitted data will be handled and then return to a 
                before-input page which is usually a list page of items. To use OneStepFormHandlerTrait, you need to put the following HTML in your form template files if you are using
                the default SimpleFormProcessData:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e786"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e789">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-current"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-failed"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-success"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"complete"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>save<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-exit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"exit"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>cancel<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>

            </fo:block><fo:inline font-style="italic">By OneStepFormHandlerTrait's default implementation, the "step-current" and "step-failed" must be "input", the "step-success" and the "step-exit" can be any non empty value
                    (usually "complete" and "exit" is good enough).</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.5 SimpleFormProcessData HTML for OneStepFormHandlerTrait</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The ClassicalMultiStepFormFlowHandlerTrait represents a little bit complicated situations: there are multiple steps in the flow. ClassicalMultiStepFormFlowHandlerTrait
                assumes that there is at least one input page and one confirm page with a possible complete page. For the single input page case, ClassicalMultiStepFormFlowHandlerTrait
                can be used directly, but if there are multiple splitted input pages, the developer need to do more customization.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For a classical 3-step form flow(input, confirm, complete), the following HTML need to be put into the form template files:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e797"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e800">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-current"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-failed"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-success"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"confirm"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>confirm<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-exit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"exit"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>cancel<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>

            </fo:block><fo:inline font-style="italic">At input page, the "step-current" and "step-failed" must be "input", the "step-success" must be "confirm", the "step-exit" can be any non empty value
                    (usually "exit" is good enough).</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.6 SimpleFormProcessData HTML for ClassicalMultiStepFormFlowHandlerTrait - buttons of input page</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e804"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e807">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-current"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"confirm"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-failed"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-success"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"complete"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>send<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-back"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"input"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>back<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-exit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"btn btn-sm btn-default"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"exit"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>cancel<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>

            </fo:block><fo:inline font-style="italic">At confirm page, the "step-current" must be "confirm","the step-failed" must be "input", the "step-success" must be "complete", the "step-back" must be
                    "input", the "step-exit" can be any non empty value (usually "exit" is good enough).</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.7 SimpleFormProcessData HTML for ClassicalMultiStepFormFlowHandlerTrait - buttons of confirm page</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e811"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e814">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;button</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"submit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"step-exit"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"exit"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>return<fo:inline font-weight="bold" color="#3F7F7F">&lt;/button&gt;</fo:inline>

            </fo:block><fo:inline font-style="italic">At complete page, a non empty value of "step-exit" is enough.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.8 SimpleFormProcessData HTML for ClassicalMultiStepFormFlowHandlerTrait - buttons of complete page</fo:block></fo:block></fo:block><fo:block font-style="italic">Note that the value of steps' name are not fixed and you can always define your own names by overriding the corresponding methods about step names at
                  ClassicalMultiStepFormFlowHandlerTrait.</fo:block></fo:block><fo:block id="d0e820"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Implement a real form flow handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As introduced in previous sections, we should always extend our own handler from the built-in classical traits, before which we also have to decide what our flow
                should be: one step or multiple steps?</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Further, In user project, a common parent class is always recommended. A project limited common parent class can be used to decide the special rules of the 
                user project and the following two method is strongly recommended to be overridden to return a configured and validator.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e827"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e828"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getTypeUnMatchValidator()</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e831"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getValueValidator()</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e834"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e837">

<fo:inline font-weight="bold">/**
 * A common parent handler to configure the common actions of form flow process in application. &lt;br&gt;
 * For quick start, an empty class body would be good enough. You only need to do the customization when you really need to do it!!!
 * 
 */</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">abstract</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> Asta4DSamplePrjCommonFormHandler&lt;T&gt; <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> ClassicalMultiStepFormFlowHandlerTrait&lt;T&gt; {

    <fo:inline font-style="italic" color="#3F5FBF">// we use a field to store a pre generated instance rather than create it at every time</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> SamplePrjTypeUnMatchValidator typeValidator = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> SamplePrjTypeUnMatchValidator(false);

    <fo:inline font-style="italic" color="#3F5FBF">// as the same as type validator, we cache the value validator instance here</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> SamplePrjValueValidator valueValidator = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> SamplePrjValueValidator(false);

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> FormValidator getTypeUnMatchValidator() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> typeValidator;
    }

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> FormValidator getValueValidator() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> valueValidator;
    }

}

            </fo:block><fo:inline font-style="italic">At confirm page, the "step-current" must be "confirm","the step-failed" must be "input", the "step-success" must be "complete", the "step-back" must be
                    "input", the "step-exit" can be any non empty value (usually "exit" is good enough).</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.9 A common parent handler in project:</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">More details about validator can be found at later section.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In both OneStepFormHandlerTrait and ClassicalMultiStepFormFlowHandlerTrait, there are 3 methods which are required to be implemented by developers.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e845"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e846"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Class&lt;T&gt; getFormCls()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Which specify the form type of current </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e851"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>T createInitForm()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To create form instance from the current request context. By default, this method will build a form instance from context by the given type returned by
                    getFormCls(). A handler which need to retrieve the initial form data from storage should override this method to afford a initial form instance. For 
                    common cases, a handler for adding is not necessary to override this method but a handler for updating should override this method to query database 
                    and build the corresponding form instance.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e856"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e859">                                                                 

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> PersonFormForMultiStep createInitForm() <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        PersonFormForMultiStep form = <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.createInitForm();
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (form.getId() == null) {<fo:inline font-style="italic" color="#3F5FBF">// add</fo:inline>
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> form;
        } <fo:inline font-weight="bold" color="#7F0055">else</fo:inline> {<fo:inline font-style="italic" color="#3F5FBF">// update</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">// retrieve the form form db again</fo:inline>
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> PersonFormForMultiStep.buildFromPerson(PersonDbManager.instance().find(form.getId()));
        }
    }

                    </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.10 query updating target data from db in createInitForm()</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e861"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>void updateForm(T form)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Which is supposed to perform the final update logic of current form flow.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e866"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e869">                                                                 

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> updateForm(PersonFormForMultiStep form) {
        DefaultMessageRenderingHelper msgHelper = DefaultMessageRenderingHelper.getConfiguredInstance();
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (form.getId() == null) {<fo:inline font-style="italic" color="#3F5FBF">// add</fo:inline>
            PersonDbManager.instance().add(Person.createByForm(form));
            <fo:inline font-style="italic" color="#3F5FBF">// output the success message to the global message bar</fo:inline>
            msgHelper.info(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"data inserted"</fo:inline>);
        } <fo:inline font-weight="bold" color="#7F0055">else</fo:inline> {<fo:inline font-style="italic" color="#3F5FBF">// update</fo:inline>
            Person p = Person.createByForm(form);
            PersonDbManager.instance().update(p);
            <fo:inline font-style="italic" color="#3F5FBF">// output the success message to specified DOM rather than the global message bar</fo:inline>
            msgHelper.info(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".x-success-msg"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"update succeed"</fo:inline>);
        }
    }

                </fo:block><fo:inline font-style="italic">Note that there is a built-in message rendering mechanism to help developer supply a responsive interaction more easily. The 
                        details will be introduced later, simply remember that you can output message by info/warn/error levels.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.11 update form data</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="d0e873"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">HTML template of form</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">HTML template of form</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As the common pages of Asta4D, the HTML template of a form is as pure HTML too.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e878"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e881">                                                                 

<fo:inline font-weight="bold" color="#3F7F7F">&lt;form</fo:inline> <fo:inline font-weight="bold" color="#7F007F">method</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"post"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"form.SingleInputFormSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sex"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sex"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"radio"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;label</fo:inline> <fo:inline font-weight="bold" color="#7F007F">for</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sex"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>M<fo:inline font-weight="bold" color="#3F7F7F">&lt;/label&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;select</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"bloodtype"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"bloodtype"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;option</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"A"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>A<fo:inline font-weight="bold" color="#3F7F7F">&lt;/option&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;option</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"R"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:clear&gt;R&lt;/option&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#7F007F">&lt;/select&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#7F007F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"language"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"language"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"checkbox"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;label</fo:inline> <fo:inline font-weight="bold" color="#7F007F">for</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"language"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>M<fo:inline font-weight="bold" color="#3F7F7F">&lt;/label&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;textarea</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"memo"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/textarea&gt;</fo:inline>
  
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;input</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"hidden"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"id"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>

  <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates/form/singleInput/btns.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/form&gt;</fo:inline>

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.12 Form template</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As you see in the above example, there is no special declaration in the template, let us see how to declare a form POJO to handle the 
      various form field types:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e885"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e888">                                                                 

<fo:inline font-style="italic" color="#3F5FBF">//@Form to tell the framework this class can be initialized from context</fo:inline>
<fo:inline font-style="italic" color="#3F5FBF">//extend from the entity POJO to annotate form field definitions on getters.</fo:inline>
<fo:inline color="gray">@Form</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> PersonForm {
    <fo:inline color="gray">@Hidden</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Integer id;

    <fo:inline color="gray">@Input</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String name;

    <fo:inline color="gray">@Input</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Integer age;

    <fo:inline color="gray">@Select(name = "bloodtype")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> BloodType bloodType;

    <fo:inline font-style="italic" color="#3F5FBF">// the field name would be displayed as "gender" rather than the original field name "sex" in validation messages</fo:inline>
    <fo:inline color="gray">@Radio(nameLabel = "gender")</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> SEX sex;

    <fo:inline color="gray">@Checkbox</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Language[] language;

    <fo:inline color="gray">@Textarea</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String memo;

}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.13 form template</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The details of annotations will be introduced later, just remember that there is always an annotation which can represent a 
      certain type of form field.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Another point here is that you can always declare all the fields by your business type rather than string type, the framework 
      will handle the value conversion correctly.</fo:block></fo:block><fo:block id="d0e894"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Form snippet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Form snippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To render the form values to template, we have to declare a snippet which extends from the AbstractFormFlowSnippet. As the same
        as the built-in two classical handler traits, there are two corresponding snippet traits: OneStepFormSnippetTrait and ClassicalMultiStepFormFlowSnippetTrait.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also as the same as handlers, a project common parent snippet is recommended to perform common customization.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e901"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e904">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> SingleInputFormSnippet <fo:inline font-weight="bold" color="#7F0055">extends</fo:inline> Asta4DSamplePrjCommonFormSnippet {

    <fo:inline font-weight="bold">/**
     * override this method to supply the option data for select, radio and checkbox.
     */</fo:inline>
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> List&lt;FormFieldPrepareRenderer&gt; retrieveFieldPrepareRenderers(String renderTargetStep, Object form) {
        List&lt;FormFieldPrepareRenderer&gt; list = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> LinkedList&lt;&gt;();

        list.add(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> SelectPrepareRenderer(PersonForm.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"bloodtype"</fo:inline>).setOptionData(BloodType.asOptionValueMap));

        list.add(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> RadioPrepareRenderer(PersonForm.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"sex"</fo:inline>).setOptionData(SEX.asOptionValueMap));

        list.add(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> CheckboxPrepareRenderer(PersonForm.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"language"</fo:inline>).setOptionData(Language.asOptionValueMap));

        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> list;
    }
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.14 Form snippet implementation</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Developers are usually asked to override the retrieveFieldPrepareRenderers method to supply extra data for field rendering, 
            commonly the list of option data is required.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">SelectPrepareRenderer can be used to afford option list for select element, RadioPrepareRenderer and CheckboxPrepareRenderer
            can be used for radio and checbox input element.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Finally, do not forget to put your snippet declaration in your template file.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e912"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e915">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;form</fo:inline> <fo:inline font-weight="bold" color="#7F007F">method</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"post"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"form.SingleInputFormSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/form&gt;</fo:inline>

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.15 Declare snippet in form template</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Basically, until now we have gotten a workable form flow implementation. There is only one thing left that is validation which
            will be described in the next section.</fo:block></fo:block><fo:block id="d0e919"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Cascade form POJO and array field</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Cascade form POJO and array field</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e922"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Advanced</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">8.2. Advanced</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e922"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e925">Validation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e925"><fo:page-number-citation ref-id="d0e925"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e949">Message rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e949"><fo:page-number-citation ref-id="d0e949"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e952">Customize form field annotation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e952"><fo:page-number-citation ref-id="d0e952"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e955">A sample of defining a new flow rule</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e955"><fo:page-number-citation ref-id="d0e955"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e925"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Validation</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Validation</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D allows any validation mechanism to be integrated and supports Bean Validation 1.1(JSR349 and JSR303) by default. We will explain
            how to use the built-in Bean Validation mechanism in this section. The later section will introduce how to customize the validation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To use Bean Validation, just simply add validation annotations to your form POJO as following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e932"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e935">

<fo:inline color="gray">@NotBlank</fo:inline>
<fo:inline color="gray">@Size(max = 6)</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> String getName() {
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> name;
}

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> setName(String name) {
    <fo:inline font-weight="bold" color="#7F0055">this</fo:inline>.name = name;
}

<fo:inline color="gray">@Max(45)</fo:inline>
<fo:inline color="gray">@NotNull</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Integer getAge() {
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> age;
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 8.16 Declare validation annotations</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">More details of Bean Validation can be found at <fo:basic-link external-destination="url(http://beanvalidation.org/)">Bean Validation</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline> <fo:basic-link external-destination="url(http://beanvalidation.org/)">http://beanvalidation.org/</fo:basic-link></fo:block></fo:footnote-body></fo:footnote>. 
            We are also using Hibernate Validator as the implementation(the only existing one in the earth currently). See details at
            <fo:basic-link external-destination="url(http://hibernate.org/validator/)">Hibernate Validator</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline> <fo:basic-link external-destination="url(http://hibernate.org/validator/)">http://hibernate.org/validator/</fo:basic-link></fo:block></fo:footnote-body></fo:footnote>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The validation will be invoked before the calling of method updateForm, if there is any validation error, the page will be
            forwarded to the step specified by "step-failed" which is usually the input page, and the validation error message will be
            rendered to page too. More details about validation message rendering will be introduced in later sections.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As recommended before, a project common parent class is recommended to afford a configured validator or any other customized
            validator implementation.</fo:block></fo:block><fo:block id="d0e949"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Message rendering</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Message rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e952"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Customize form field annotation</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Customize form field annotation</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e955"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">A sample of defining a new flow rule</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">A sample of defining a new flow rule</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(Include about how to implement multiple input steps)</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-best-practice"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">9. Best practice</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In this chapter, we will introduce the best practice of Asta4D from our own experiences. There are some conventions and assumption in this chapter, 
        absolutely there are always special cases which are out of our assumption, however you can break any rules to handle your special cases, we only
        discuss the common cases in this chapter.
  </fo:block><fo:block id="division-responsibilities"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Division of responsibilities between request handler and snippet</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">9.1. Division of responsibilities between request handler and snippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...division-responsibilities"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="do-update-by-request-handler">Do update by request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="do-update-by-request-handler"><fo:page-number-citation ref-id="do-update-by-request-handler"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="normalize-page-condition">Normalize page condition by request handler</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="normalize-page-condition"><fo:page-number-citation ref-id="normalize-page-condition"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.division-responsibilities.normalize-page-condition" margin-left="24pt"><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-of-unique-resource-id">The URL of current page represents the unique resource id of an entity(resource)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-of-unique-resource-id"><fo:page-number-citation ref-id="url-of-unique-resource-id"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-of-search-condition-for-list">The URL of current page represents a search condition which can be used to retrieve a list of entities(resources)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-of-search-condition-for-list"><fo:page-number-citation ref-id="url-of-search-condition-for-list"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block id="do-update-by-request-handler"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Do update by request handler</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Do update by request handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">MUST do all the operations with side effect at request handler side, that is so we called isolating side effect.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NEVER do any operations with side effect at snippet side.</fo:block></fo:block><fo:block id="normalize-page-condition"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Normalize page condition by request handler</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Normalize page condition by request handler</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...normalize-page-condition"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-of-unique-resource-id">The URL of current page represents the unique resource id of an entity(resource)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-of-unique-resource-id"><fo:page-number-citation ref-id="url-of-unique-resource-id"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="url-of-search-condition-for-list">The URL of current page represents a search condition which can be used to retrieve a list of entities(resources)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="url-of-search-condition-for-list"><fo:page-number-citation ref-id="url-of-search-condition-for-list"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is a little bit difficult to explain this rule. For a page, we assume that there are always only 2 types of pages. Let us see how we 
            should divide our logic between the request handler and snippet.
      </fo:block><fo:block id="url-of-unique-resource-id"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">The URL of current page represents the unique resource id of an entity(resource)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e983"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e984"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request handler</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e987"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e988"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Retrieve the entity(resource) from back-end storage(usually the db) by given id which is specified by the URL</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e991"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Decide how/what to response</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e994"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e995"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>(for example)If the target entity does not exist, return a 404 to the client</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e998"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>(for example)If the target entity has been changed/migrated to another entity, return a 301 to the client</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1001"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>(usually)Save the entity to Context and then forward to the target html template</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1004"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>snippet</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1007"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1008"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Retrieve the saved entity(resource) from Context(by @ContextData)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1011"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Perform other necessary query for rendering</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="url-of-search-condition-for-list"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:block font-size="10pt" space-before.optimum="0.4em" space-before.minimum="0.4em" space-before.maximum="0.4em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">The URL of current page represents a search condition which can be used to retrieve a list of entities(resources)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1017"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1018"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request handler</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1021"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1022"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>For simple cases, a request handler is not necessary</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Because the snippet can retrieve the condition by @ContextData directly.
                            However we recommend to declare a POJO to represent your search condition for a little bit complicated situations.
                      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1027"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1030">

<fo:inline color="gray">@ContextDataSet</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> Condition{
 
  <fo:inline color="gray">@QueryParam</fo:inline>
  <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String queryword;
 
  <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> String getQueryword(){
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> queryword;
  } 
}

                                </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1032">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet{
 
  <fo:inline color="gray">@ContextData</fo:inline>
  <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Condition condition;
  
}

                          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 9.1 Snippet handling a search condition POJO</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1034"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Normalize the search condition POJO</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In some complicated situations, you may need to retrieve the POJO in request handler then do some necessary normalization. After the
                            POJO was normalized, you should save it into Context to pass to snippet.
                      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1039"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1042">

<fo:inline color="gray">@ContextDataSet(singletonInContext=true)</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MyHandler{

  <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> <fo:inline font-weight="bold" color="#7F0055">final</fo:inline> String SEARCH_CONDITION = <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"SEARCH_CONDITION#MyHandler"</fo:inline>;
 
  <fo:inline color="gray">@RequestHandler</fo:inline>
  <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> handle(Condition condition){
    <fo:inline font-style="italic" color="#3F5FBF">//do some normalization here</fo:inline>
    ...
    <fo:inline font-style="italic" color="#3F5FBF">//This is not necessary</fo:inline>
    <fo:inline font-style="italic" color="#3F5FBF">//Context.getCurrentThreadContext().setData(SEARCH_CONDITION, condition);</fo:inline>
  } 
}

                          </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1044">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet{
 
  <fo:inline color="gray">@ContextData</fo:inline>
  <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Condition condition;
  
}

                          </fo:block><fo:inline font-style="italic">There is a trick that if we define a ContextDataSet's singletonInContext to true, there will be only on single instance in the context, 
                          thus we do not need to declare the name of ContextData even we stored the POJO by name at the handler side. Even that you do not need to save the
                          condition POJO explicitly since it is the single instance in the Context.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 9.2 Normalize the search condition POJO</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1048"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>snippet</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1051"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1052"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Retrieve the saved search condition POJO from Context(by @ContextData) or simply declare the search condition as its own fields(by @ContextData)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1055"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Perform the query by given search condition to retrieve the list of entities(resources)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1058"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Perform other necessary query for rendering</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block id="common-usage-form-flow"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Common usage of form flow</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">9.2. Common usage of form flow</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block font-style="italic">To be written.</fo:block></fo:block><fo:block id="best-snippet-way"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">The best way of implementing a snippet</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">9.3. The best way of implementing a snippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...best-snippet-way"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="perform-queries-simple">Perform queries as simple as possible</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="perform-queries-simple"><fo:page-number-citation ref-id="perform-queries-simple"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="make-use-of-parallelRowRender">Make use of ParallelRowRender</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="make-use-of-parallelRowRender"><fo:page-number-citation ref-id="make-use-of-parallelRowRender"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="cache-data">Cache your data</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="cache-data"><fo:page-number-citation ref-id="cache-data"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="avoid-duplicated-query">Avoid duplicated query</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="avoid-duplicated-query"><fo:page-number-citation ref-id="avoid-duplicated-query"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="prepare-snippet-instance">Prepare snippet instance(set default value) by InitializableSnippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="prepare-snippet-instance"><fo:page-number-citation ref-id="prepare-snippet-instance"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="selector-x-convention">"x-" convention selector</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="selector-x-convention"><fo:page-number-citation ref-id="selector-x-convention"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="remove-rather-than-add">Remove contents rather than add contents for conditional rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="remove-rather-than-add"><fo:page-number-citation ref-id="remove-rather-than-add"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="perform-queries-simple"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Perform queries as simple as possible</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Perform queries as simple as possible</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We encourage developers to retrieve the data at the place where the data is required rather than retrieve a complicated data structure which holds all the necessary
            data for the whole page rendering in bulk. We make a convention that there are only 4 type of return value in our service layer(where the queries are performed exactly):
      </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1074"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1075"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>a single entity which is usually the POJO for ORMAP</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1078"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>an list of entities' ids(not the entities themselves)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1081"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>a count of some aggregation queries</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1084"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>a map as &lt;id, count&gt; of some aggregation queries</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the implementation of render methods, we always retrieve the entity instance one by one even we are rendering a list of entity
            (exactly we only have a list of entities' ids). For the concern about performance, see the later description of cache. However, there must be some 
            situations that we cannot be satisfied with the performance by retrieving data in a too small granularity. We handle these cases as following steps:
      </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1089"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1090"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Ask yourself, is it true that the granularity of data retrieving is the bottleneck of current performance issue.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1093"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Ask your team members to confirm the bottleneck again.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1096"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Implement a query method which returns a map as &lt;id, entity&gt; in bulk, then retrieve the entity from the map in the list rendering.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1099"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If there is still a performance issue, ask yourself and ask your team members to confirm the bottleneck again.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1102"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Build a query to retrieve all necessary data in bulk then return a complicated data structure from the query method just like what we are used to do
                  in the traditional MVC mode.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In fact, the complicated data structures are rare in our system and most of our cases can be satisfied with the basic ORMAP entities.</fo:block></fo:block><fo:block id="make-use-of-parallelRowRender"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Make use of ParallelRowRender</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Make use of ParallelRowRender</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The ParallelRowRender splits the rendering action to threads with the size of rendered list. If there are some heavy operations in the list rendering, 
            ParallelRowRender is a good option to reduce the time of rendering.</fo:block></fo:block><fo:block id="cache-data"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Cache your data</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Cache your data</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since we are encouraging developers to retrieve data by a small granularity, the cache is very important to the system. Especially we often retrieve entities one by one
      in the list rendering, the cache of entities is the most important thing for performance. As a matter of fact, we can use the cache more effective because of the small 
      data granularity.</fo:block></fo:block><fo:block id="avoid-duplicated-query"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Avoid duplicated query</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Avoid duplicated query</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An frequently asked question is how to avoid duplicated query in the snippet class. That is actually an problem since we encourage the developers perform queries at 
      the place where the data is required. We have the following options to combat this issue:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1122"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1123"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Global query lock via AOP</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is the first option that we recommend for query heavy systems and exactly what we did in our system before we moved to saas architecture. We split all the real 
              queries to a service layer then perform a global lock for all the equal calling parameters on the same method. We use spring as our IOC container and simply add the 
              lock logic by the spring's AOP mechanism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1128"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>ContextBindData</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the lighter systems, ContextBindData would be a good choice for most situations. The get method of ContextBindData will be executed only once in the current
                    Context. See the detail of ContextBindData at <fo:basic-link internal-destination="vi-ContextDataFinder"><fo:inline>the section called “ContextDataFinder”</fo:inline></fo:basic-link>.
              </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">ContextBindData can also be used as a graceful simple wrapping mechanism for data retrieving at snippet layer. Developers can declare the common queries of a snippet
                    class as ContextBindData fields of it.
              </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1137"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>InitializableSnippet</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A snippt class can also implement an interface called InitializableSnippet. The init() method of a snippet which implements the InitializableSnippet will be
                    called once after the snippet instance is created. Developer can do some prepare work for rendering by this mechanism such as performing common queries. 
                    However, performing query in init() method is not recommended but everything is by your choice.
              </fo:block><fo:block font-style="italic">In multiple thread rendering, the snippet classes may still be instantiated multiple times. There is no warranty about it.
              </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="prepare-snippet-instance"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Prepare snippet instance(set default value) by InitializableSnippet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Prepare snippet instance(set default value) by InitializableSnippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As we mentioned above, InitializableSnippet can be used to do some initialization work after the snippet instance is created. We do not recommend to perform common
            queries in init() method of InitializableSnippet, but the InitializableSnippet interface is still a good option for preparing a snippet instance.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The classical usage of InitializableSnippet is that we can set default value of declared @ContextData fields if some of them are set to null.</fo:block></fo:block><fo:block id="selector-x-convention"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">"x-" convention selector</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">"x-" convention selector</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Though we can use various selectors to render data into the template file, we recommend to use css class name selector in common cases, which affords the best
      compatibility to the frond-end refactoring. We also made a convention which is called "x-" convention. we will always add a css class started with "x-" to the data rendering
      target, which tells the front-end guys try their best to keep the compatibility against the "x-" marked elements when they are refactoring the html sources.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Although we always use "x-" convention to render our data, there are still some acceptable exceptions in our practice:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1158"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1159"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>use "a" directly when rendering the link to the "href" attribute</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1162"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>use "img" directly when rendering the link to the "src" attribute</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1165"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>use "li" directly when rendering a list</fo:block><fo:block font-style="italic">This one is controversial, some of our members argue that we should use "x-" instead of direct "li" selector.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="remove-rather-than-add"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Remove contents rather than add contents for conditional rendering</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Remove contents rather than add contents for conditional rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes we need to do conditional rendering. For instance, we assume that there are two tabs which can be switched by different query parameter, a possible way is 
      to create the target tab contents dynamically at snippet side as following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1175"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1178">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> id){
    Element elem = null;
    <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(id == 0){
        elem = ElementUtil.ParseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;"</fo:inline> + id + <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;/div&gt;"</fo:inline>);
    }<fo:inline font-weight="bold" color="#7F0055">else</fo:inline>{
        elem = ElementUtil.ParseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div class="</fo:inline>great<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&gt;"</fo:inline> + id + <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;/div&gt;"</fo:inline>);
    }
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".x-target"</fo:inline>, elem);
}

          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 9.3 create contents dynamically</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Apparently there is bad smell in above example, we generate DOM element at snippet side, which makes front-end refactoring difficult. The recommended way is to write all
      the possible contents in template file and remove the unnecessary ones in snippet.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1182"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1185">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> id){
    Renderer renderer = Renderer.create();
    <fo:inline font-style="italic" color="#3F5FBF">//remove the clear mark</fo:inline>
    renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".x-target-"</fo:inline> + id, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"-class"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"x-clear"</fo:inline>);
    <fo:inline font-style="italic" color="#3F5FBF">//then clear the left ones which is not necessary</fo:inline>
    renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".x-clear"</fo:inline>, Clear);
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> renderer;
}

            </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1187">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"x-target-0 x-clear"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>0<fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"x-target-1 x-clear"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>1<fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>

          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 9.4 remove redundant contents</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="asta4d-reference"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">Part III. Reference</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-template"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">10. Details of Template</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1195"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Supported tags</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">10.1. Supported tags</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e1195"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1199">afd:extension</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1199"><fo:page-number-citation ref-id="d0e1199"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1218">afd:block</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1218"><fo:page-number-citation ref-id="d0e1218"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1264">afd:embed</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1264"><fo:page-number-citation ref-id="d0e1264"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1287">afd:snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1287"><fo:page-number-citation ref-id="d0e1287"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1323">afd:group</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1323"><fo:page-number-citation ref-id="d0e1323"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1336">afd:comment</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1336"><fo:page-number-citation ref-id="d0e1336"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1349">afd:msg</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1349"><fo:page-number-citation ref-id="d0e1349"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e1199"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:extension</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:extension</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:extension" tag declares the relationship of inheritance between child template and parent template.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1204"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1207">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   

...

<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>   

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.1 child.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1209"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1212" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>parent</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Identifies the parent template file of the current template.</fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1218"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:block</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:block</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:block" tag declares a referenceable block in the template file. Child template file can reference the
      blocks in parent template by the same tag "afd:block" with extra action declaration: append, insert, override.
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1223"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1226">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;html&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;head&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
           
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block2"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;title&gt;</fo:inline>extension sample<fo:inline font-weight="bold" color="#3F7F7F">&lt;/title&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/head&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;body&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>content<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/body&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/html&gt;</fo:inline> 

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.2 parent.html</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1228"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1231">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   

    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">append</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child1.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">insert</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block2"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child2.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">override</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.3 child.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1233"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1236" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>id</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The referenceable id of a block.</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1242" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>append</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>
            Append all the children of current tag to the tail of the parent's block which id equals the declared
            value of the append attribute.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1248" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>insert</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>
            Insert all the children of current tag to the head of the parent's block which id equals the declared
            value of the insert attribute.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1254" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>override</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>
            Override the parent's block which id equals the declared value of the override attribute by all the
            children of current tag.
            </fo:block></fo:block></fo:block><fo:block font-style="italic">The result of merging the above two files by Asta4D's template engine can be found at <fo:basic-link internal-destination="chapter-Inheritable-template"><fo:inline>Chapter 2, <fo:inline font-style="italic">Flexible template</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block><fo:block id="d0e1264"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:embed</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:embed</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:embed" tag declares an action of extracting and inserting an external file's content to the site where
      the "afd:embed" tag is declared.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1269"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1272">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">override</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content "</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates/embed.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> &gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>  

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.4 child.html</fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1274"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1277" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>target</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The path of which file should be included at the declaration site.</fo:block></fo:block></fo:block><fo:block font-style="italic">In the embed target file, afd:block can also be used to append/insert/override the blocks in source template.
      Samples and the merging result can be found at <fo:basic-link internal-destination="chapter-Inheritable-template"><fo:inline>Chapter 2, <fo:inline font-style="italic">Flexible template</fo:inline></fo:inline></fo:basic-link>.
      </fo:block></fo:block><fo:block id="d0e1287"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:snippet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:snippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:snippet" tag declares an Java class which assumes the duty of rendering data to the html snippet contained
      by the declaring tag.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1292"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1293">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:snippet</fo:inline> <fo:inline font-weight="bold" color="#7F007F">render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"SimpleSnippet:setProfile"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>name:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>dummy name<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>age:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>0<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:snippet&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.5 </fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1295"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1298" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>render</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The snippet class name and render method name by format:&lt;class name&gt;:&lt;method name&gt;, the class name
            and the method name are split by colon. If the method name is omitted, the default method name "render" will be used.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1304" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>parallel</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>A snippet tag with "parallel" attribute will be executed in a separated thread from the main thread of current
            http request. It is not necessary to assign a value to this attribute.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1310" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>clear</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>A snippet tag with "clear" attribute will not be executed and will be removed from the final output page. This
            is useful for disabling certain contents temporarily in certain situations such as debug. It is not necessary to assign
            a value to this attribute.
            </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      There is an alternative way to declare a snippet by "afd:render" attribute.
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1318"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1319">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"SimpleSnippet:setProfile"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>name:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>dummy name<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>age:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>0<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.6 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By the same way, "afd:paralell" and "afd:clear" can be used on arbitrary html tags which will be treated as the same as
      a "afd:snippet" tag. Note that "afd:paralell" will not be available except the "afd:render" is declared too, but the 
      "afd:clear" will be always available even there is no declaration of "afd:render" on the html tag.
      </fo:block></fo:block><fo:block id="d0e1323"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:group</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:group</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:group" tag declares a referenceable DOM element for back-end Java snippet class. It is useful to reference certain
      text without wrapping html tag or combine a group of coordinate html tags as a single node.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1328"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1329">


<fo:inline font-weight="bold" color="#3F7F7F">&lt;p&gt;</fo:inline>We found <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:group</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"item-count"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>3<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:group&gt;</fo:inline> matched items in our database.<fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline> 

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:group</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"list-item"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"title"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>the title<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>the content<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:group&gt;</fo:inline>


      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.7 </fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:inline font-style="italic">None.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1331"/></fo:block><fo:block id="d0e1336"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:comment</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:comment</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:comment" tag declares a comment block in the template files and it will be removed after rendering.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1341"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1342">


<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:comment&gt;</fo:inline>This is comment<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:comment&gt;</fo:inline>

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:comment&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>This is comment too.<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:comment&gt;</fo:inline>


      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.8 </fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:inline font-style="italic">None.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1344"/></fo:block><fo:block id="d0e1349"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:msg</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:msg</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A "afd:msg" tag declares a message managed in external files. This tag is mainly designed for i18n support, but
      it also can be used as a simple string replacer. Please see <fo:basic-link internal-destination="chapter-detail-i18n"><fo:inline>Chapter 15, <fo:inline font-style="italic">i18n</fo:inline></fo:inline></fo:basic-link> for more details.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1356"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1357">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"search.result.count"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:message&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.9 </fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Attributes:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e1359"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1362" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>key</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The message key which should can be found in the configured message file.</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1368"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Additional</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">10.2. Additional</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1371"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1372"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>HTML5 convention</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Asta4D's template engine does only support html5, which relies on the underline library <fo:basic-link external-destination="url(http://jsoup.org)">jsoup(verion 1.6.3)</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(http://jsoup.org)">http://jsoup.org</fo:basic-link></fo:block></fo:footnote-body></fo:footnote>.
        jsoup implements the <fo:basic-link external-destination="url(http://whatwg.org/html)">WHATWG HTML5</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline> <fo:basic-link external-destination="url(http://whatwg.org/html)">http://whatwg.org/html</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> specification and requires compliance from the target file.
        jsoup can fix some cases of breaking specification but you would still get unexpected result for certain cases. Basically, you should take care
        of the following things:
        <fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1383"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1384"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>All tags and attributes are converted to lower case.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1387"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Self closed tags such as &lt;div /&gt; or &lt;afd:embed target="embed.html" /&gt; is not legal.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1390"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>There are some tags that the parser "ensures".For example a &lt;tbody&gt; tag must be the first tag inside &lt;table&gt;, which
          breas the following example:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1393"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1394">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;table&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:snippet</fo:inline> <fo:inline font-weight="bold" color="#7F007F">render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ListSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;tr&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;td&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/td&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/tr&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:snippet&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/table&gt;</fo:inline> 

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.10 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">But it can be replaced by the following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1398"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1399">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;table&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;tr</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ListSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;td&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/td&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/tr&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/table&gt;</fo:inline> 

            </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.11 </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1402"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>body convention</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When a child template file uses "afd:extension" to declare its parent template, only the body part(all the 
        children of the body except the body tag itself) of the child template will be processed by the template engine 
        and the parts out of body will be ignored simply. The same convention is applied to the embed target file. The 
        following two sample will not cause different results by Asta4D.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1407"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1410">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">override</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content "</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates/embed.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> &gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>  

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.12 child.html without body tag:</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="child-with-body-tag"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1415">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;html&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;head&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;meta</fo:inline> <fo:inline font-weight="bold" color="#7F007F">charset</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"UTF-8"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/head&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;body&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:extension</fo:inline> <fo:inline font-weight="bold" color="#7F007F">parent</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parent.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">override</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"content "</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>hello<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates/embed.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> &gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
  
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:extension&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/body&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/html&gt;</fo:inline>  

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.13 child.html with body tag:</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        This convention can be used for editor compatibility in case of your prefer html editor requires correct meta information
        (We add charset="UTF-8" to all of our template files for this reason). Note that this convention is only available on extended
        child template file or embedded target file, the parts out of body tag will be processed normally in the parent template file
        which is as a root template without further parent.
        </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Further, explicit parameter information can be commented at body tag in parameterizable embed target file for better source
        readability.
        </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="embed-with-parameter-declaring"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1424">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;html&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;head&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;meta</fo:inline> <fo:inline font-weight="bold" color="#7F007F">charset</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"UTF-8"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/head&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;body</fo:inline> <fo:inline font-weight="bold" color="#7F007F">itemsize</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"{Integer}"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">itemlist</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"{List}"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:block</fo:inline> <fo:inline font-weight="bold" color="#7F007F">append</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"block1"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>   
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;link</fo:inline> <fo:inline font-weight="bold" color="#7F007F">href</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"embed.css"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">rel</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"stylesheet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">type</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"text/css"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F"> /&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:block&gt;</fo:inline>   
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;div&gt;</fo:inline>good embed<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>   
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/body&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/html&gt;</fo:inline>

          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            In <fo:basic-link internal-destination="embed-with-parameter-declaring"><fo:inline>Example 10.14, “embed.html”</fo:inline></fo:basic-link>, we put some "strange" information in the body tag, which suggests that
            when this file is embedded, it requires an Integer parameter named "itemsize" and a List parameter named "itemlist". Note
            that such declaration can only be regarded as a hint for source reader and there is no warranty about any parameter check.
            You should consider it as a sample of how you can make interesting use of the body convention.
          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 10.14 embed.html</fo:block></fo:block></fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1431"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>"afd" name space</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The "afd" name space is configured as the default name space of Asta4D's special tags. This name space can be
        changed by Configuration#setTagNameSpace.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1437"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>TemplateResolver</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D searches certain template file by configured TemplateResolver. There are three pre-implemented TemplateResolver:
        FileTemplateResolver, ClasspathTemplateResolver and WebApplicationTemplateResolver. The default configured WebApplicationTemplateResolver
        will search template files with awareness of servlet container. The FileTemplateResolver and ClasspathTemplateResolver
        can be used for test purpose, you can also provide your own TemplateResolver for special search mechanism.
        </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-snippet"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">11. Details of snippet class</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1445"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Rendering APIs</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">11.1. Rendering APIs</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e1445"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1451">Create and add Renderer instance</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1451"><fo:page-number-citation ref-id="d0e1451"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="css-selector">CSS Selector</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="css-selector"><fo:page-number-citation ref-id="css-selector"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1813">Render text</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1813"><fo:page-number-citation ref-id="d0e1813"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1826">Render DOM attribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1826"><fo:page-number-citation ref-id="d0e1826"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1888">Clear an Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1888"><fo:page-number-citation ref-id="d0e1888"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1900">Render raw Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1900"><fo:page-number-citation ref-id="d0e1900"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1912">Arbitrary rendering for an Element</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1912"><fo:page-number-citation ref-id="d0e1912"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1929">Recursive rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1929"><fo:page-number-citation ref-id="d0e1929"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1937">Debug renderer</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1937"><fo:page-number-citation ref-id="d0e1937"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1947">Missing selector warning</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1947"><fo:page-number-citation ref-id="d0e1947"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e1962">List rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e1962"><fo:page-number-citation ref-id="d0e1962"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D provides various rendering APIs to help developers render value to the page. By those APIs, developer can render
    text under a DOM element, set the attribute value for a DOM element, also can convert a list data to a list of DOM element,
    and also other various manipulation on DOM elements.
    </fo:block><fo:block id="d0e1451"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Create and add Renderer instance</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Create and add Renderer instance</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are almost same two sets of overloaded methods: create and add. The create methods are static and can be
      used to create a Renderer instance. The add methods are instance methods and can be used to add a implicitly created
      Renderer instance to an existing Renderer instance. Both of the create and add methods return the created Renderer
      instance therefore chain invoking can be performed as well.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1456"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1457">


Renderer renderer = Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xyz"</fo:inline>).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"sometag"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"hello"</fo:inline>);
renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".someclass"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"abc"</fo:inline>).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">".someclass2"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"abc2"</fo:inline>);

Renderer renderer2 = Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId2"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xyz2"</fo:inline>);
Renderer renderer3 = Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId3"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xyz3"</fo:inline>);

<fo:inline font-style="italic" color="#3F5FBF">//add renderer2 and renderer3 to renderer</fo:inline>
renderer.add(renderer2);
renderer.add(renderer3);

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.1 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that the order of a Renderer instance being added is significant but the target instance which a Renderer
      is added to has no effect on the rendering order. In the following example, "add renderer2 to renderer then add renderer3 to renderer2"
      is completely equal to "add renderer2 and renderer3 to renderer" at above example.
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1461"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1462">


<fo:inline font-style="italic" color="#3F5FBF">//add renderer2 to renderer then add renderer3 to renderer2</fo:inline>
renderer.add(renderer2);
renderer2.add(renderer3);


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.2 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following is equal too:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1466"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1467">


<fo:inline font-style="italic" color="#3F5FBF">//add renderer3 to renderer2 then add renderer2 to renderer</fo:inline>
renderer2.add(renderer3);
renderer.add(renderer2);


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.3 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A instance of Renderer should not be considered as a single rendering declaration only, A instance of Renderer is exactly a
      rendering chain holder, you can call add method on any instance of the chain but the added Renderer instance will be always added
      to the tail of the chain. If the added Renderer instance is holding over than one Renderer instance in its own chain, the held chain
      will be added to the tail of the chain of the target Renderer.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is also a non-parameter create method which can by used to create a "do nothing" Renderer for source convenience. In our
      practice, we write the following line at the beginning of most of our snippet methods.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1473"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1474">

Renderer renderer = Renderer.create();

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.4 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In following sections, we will introduce add method only, but you should remember that there should be a equal create method for most
      cases. You can also read the Java doc of Renderer for more details.</fo:block></fo:block><fo:block id="css-selector"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">CSS Selector</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">CSS Selector</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D is using a modified version of <fo:basic-link external-destination="url(http://jsoup.org/)">jsoup library</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(http://jsoup.org/)">http://jsoup.org/</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> to afford CSS selector function.
      Currently, we support the following selectors:
      </fo:block><fo:block xmlns:rx="http://www.renderx.com/XSL/Extensions" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" keep-together.within-column="auto" id="d0e1486"><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Table 11.1. Supported selectors</fo:block><fo:table border-before-width.conditionality="retain" border-collapse="collapse" border-start-style="solid" border-end-style="solid" border-top-style="solid" border-bottom-style="solid" border-start-width="0.1pt" border-end-width="0.1pt" border-top-width="0.1pt" border-bottom-width="0.1pt" border-start-color="black" border-end-color="black" border-top-color="black" border-bottom-color="black" table-layout="fixed" width="100%"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-header start-indent="0pt" end-indent="0pt"><fo:table-row keep-with-next.within-column="always"><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block font-weight="bold">Pattern</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block font-weight="bold">Matches</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block font-weight="bold">Example</fo:block></fo:table-cell></fo:table-row></fo:table-header><fo:table-body start-indent="0pt" end-indent="0pt"><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>*</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>any element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>*</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>tag</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with the given tag name</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>ns|E</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements of type E in the namespace ns</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>fb|name finds &lt;fb:name&gt; elements</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>#id</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with attribute ID of "id"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div#wrap, #logo</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>.class</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with a class name of "class"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div.left, .result</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr" (with any value)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>a[href], [title]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[^attrPrefix]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute name starting with "attrPrefix". Use to find elements with HTML5 datasets</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>[^data-], div[^data-]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr=val]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr", and value equal to "val"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>img[width=500], a[rel=nofollow]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr^=valPrefix]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr", and value starting with "valPrefix"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>a[href^=http:]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr$=valSuffix]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr", and value ending with "valSuffix"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>img[src$=.png]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr*=valContaining]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr", and value containing "valContaining"</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>a[href*=/search/]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>[attr~=regex]</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements with an attribute named "attr", and value matching the regular expression</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>img[src~=(?i)\\.(png|jpe?g)]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>The above may be combined in any order</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div.header[title]</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" display-align="after" text-align="center" number-columns-spanned="3"><fo:block><fo:inline font-style="italic">Combinators</fo:inline></fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>E F</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>an F element descended from an E element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div a, .logo h1</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>E &gt; F</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>an F direct child of E</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>ol &gt; li</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>E + F</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>an F element immediately preceded by sibling E</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>li + li, div.head + div</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>E ~ F</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>an F element preceded by sibling E</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>h1 ~ p</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>E, F, G</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>all matching elements E, F, or G</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>a[href], div, h3</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" display-align="after" text-align="center" number-columns-spanned="3"><fo:block><fo:inline font-style="italic">Pseudo selectors</fo:inline></fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:lt(n)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements whose sibling index is less than n</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>td:lt(3) finds the first 2 cells of each row</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:gt(n)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements whose sibling index is greater than n</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>td:gt(1) finds cells after skipping the first two</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:eq(n)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements whose sibling index is equal to n</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>td:eq(0) finds the first cell of each row</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:has(selector)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that contains at least one element matching the selector</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div:has(p) finds divs that contain p elements</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:not(selector)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that do not match the selector. See also Elements.not(String)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>
            <fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">div:not(.logo) finds all divs that do not have the "logo" class.</fo:block>
            <fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">div:not(:has(div)) finds divs that do not contain divs.</fo:block>
          </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:contains(text)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that contains the specified text. The search is case insensitive. The text may appear in the found element, or any of its descendants.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>p:contains(jsoup) finds p elements containing the text "jsoup".</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:matches(regex)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements whose text matches the specified regular expression. The text may appear in the found element, or any of its descendants.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>td:matches(\\d+) finds table cells containing digits. div:matches((?i)login) finds divs containing the text, case insensitively.</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:containsOwn(text)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that directly contains the specified text. The search is case insensitive. The text must appear in the found element, not any of its descendants.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>p:containsOwn(jsoup) finds p elements with own text "jsoup".</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:matchesOwn(regex)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements whose own text matches the specified regular expression. The text must appear in the found element, not any of its descendants.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>td:matchesOwn(\\d+) finds table cells directly containing digits. div:matchesOwn((?i)login) finds divs containing the text, case insensitively.</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>The above may be combined in any order and with other selectors</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>.light:contains(name):eq(0)</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" display-align="after" text-align="center" number-columns-spanned="3"><fo:block><fo:inline font-style="italic">Structural pseudo selectors</fo:inline></fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:root</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>The element that is the root of the document. In HTML, this is the html element. In a snippet method, this is the element where the current snippet method is declared. In a recursive Renderer, this is the target element which the current renderer is applied to.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>:root</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:nth-child(an+b)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that have an+b-1 siblings before it in the document tree, for any positive integer or zero value of n, and has a parent element. For values of a and b greater than zero, this effectively divides the element's children into groups of a elements (the last group taking the remainder), and selecting the bth element of each group. For example, this allows the selectors to address every other row in a table, and could be used to alternate the color of paragraph text in a cycle of four. The a and b values must be integers (positive, negative, or zero). The index of the first child of an element is 1.
          In addition to this, :nth-child() can take odd and even as arguments instead. odd has the same signification as 2n+1, and even has the same signification as 2n.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>tr:nth-child(2n+1) finds every odd row of a table. :nth-child(10n-1) the 9th, 19th, 29th, etc, element. li:nth-child(5) the 5h li</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:nth-last-child(an+b)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that have an+b-1 siblings after it in the document tree. Otherwise like :nth-child()</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>tr:nth-last-child(-n+2) the last two rows of a table</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:nth-of-type(an+b)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>pseudo-class notation represents an element that has an+b-1 siblings with the same expanded element name before it in the document tree, for any zero or positive integer value of n, and has a parent element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>img:nth-of-type(2n+1)</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:nth-last-of-type(an+b)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>pseudo-class notation represents an element that has an+b-1 siblings with the same expanded element name after it in the document tree, for any zero or positive integer value of n, and has a parent element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>img:nth-last-of-type(2n+1)</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:first-child</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that are the first child of some other element.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>div &gt; p:first-child</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:last-child</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that are the last child of some other element.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>ol &gt; li:last-child</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:first-of-type</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that are the first sibling of its type in the list of children of its parent element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>dl dt:first-of-type</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:last-of-type</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that are the last sibling of its type in the list of children of its parent element</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>tr &gt; td:last-of-type</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:only-child</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that have a parent element and whose parent element hasve no other element children</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:only-of-type</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>an element that has a parent element and whose parent element has no other element children with the same expanded element name</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>:empty</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>elements that have no children at all</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block> </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" text-align="left"><fo:block> </fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block><fo:block font-style="italic">Note: Because of the internal implementation of how to perform Renderer on target element, there may be unexpected temporary elements to be added into the 
              Current DOM tree, which will be removed safely at the final stage of page production but may cause the structural pseudo selectors work incorrectly
              (However, the :root selector can still work well).
      </fo:block></fo:block><fo:block id="d0e1813"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Render text</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Render text</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">add(String selector, String value) can be used to render a text under the element specified by given selector.
      All child nodes of the target element specified by selector will be emptied and the given String value will be rendered as a single
      text node of the target element.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1818"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1819">

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"xyz"</fo:inline>);

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.5 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Long/long, Integer/int, Boolean/boolean will be treated as text rendering too.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1823"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1824">

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForLong"</fo:inline>, 123L);
renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForInt"</fo:inline>, 123);
renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForBool"</fo:inline>, true);

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.6 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1826"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Render DOM attribution</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Render DOM attribution</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">add(String selector, String attr, String value) can be used to render attribute value of a DOM element. There are some rules will
      be applied for the pattern of specified "attr" and "value":</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1831"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1832"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("+class", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call addClass(value) on target Element, null value will be treated as "null".</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1837"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("-class", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call removeClass(value) on target Element, null value will be treated as "null".</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1842"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("class", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call attr("class", value) on target Element if value is not null, for a null value, removeAttr("class") will be called.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1847"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("anyattr", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call attr("anyattr", value) on target Element if value is not null, for a null value, removeAttr("anyattr") will be called.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1852"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("anyattr", SpecialRenderer.Clear)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call removeAttr("anyattr") on target Element.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1857"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("+anyattr", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call attr("anyattr", value) on target Element if value is not null, for a null value, removeAttr("anyattr") will be called.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1862"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("+anyattr", SpecialRenderer.Clear)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call removeAttr("anyattr") on target Element.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1867"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add("-anyattr", value)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">call removeAttr("anyattr") on target Element.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is also an add method for attribution rendering that accepts arbitrary data as Object type: add(String selector, String attr, Object value).
      When the "value" is specified as a non-string value and the "attr" is specified as "+class" or "-class", A IllegalArgumentException will be thrown.
      When an arbitrary Object value is rendered to attribute by such method, an internal object reference id will be rendered to the target attribute
      instead of the original object since it cannot be treated as attribute string value directly. The object reference id can be used by variable injection
      for the nested snippet rendering. See the following example, we pass a Date instance to the nested snippet method:
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1874"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1875">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"MySnippet:outer"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"inner"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"MySnippet:inner"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;span</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"current-date"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>

        </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1877">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet{

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer outer(){
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#innder"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"now"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Date());
    }
    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer inner(Date now){
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#current-date"</fo:inline>, now);
    }
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.7 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This mechanism can be used for parametrized embedding too. Parameters can be specified by attribution rendering 
      in the snippet method of parent template file and can be retrieved by the snippet method of child template file as same
      as the above example.
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1881"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1882">

<fo:inline font-style="italic" color="#3F5FBF">&lt;!-- parent template --&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"MySnippet:outer"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:embed</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"inner"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">target</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"child.html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:embed&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>

        </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1884">

<fo:inline font-style="italic" color="#3F5FBF">&lt;!-- child template --&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"MySnippet:embed"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;span</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"current-date"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline>
  <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>

        </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1886">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet{

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer outer(){
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#innder"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"now"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Date());
    }
    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer embed(Date now){
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#current-date"</fo:inline>, now);
    }
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.8 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1888"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Clear an Element</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Clear an Element</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On all the rendering methods, if the specified value is null, the target element will be removed. And there is also
      an enumeration value of SpecialRenderer.Clear which can be used to declare a remove operation for an element too.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1893"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1894">

<fo:inline font-style="italic" color="#3F5FBF">//if the String value is null, the target element will be removed</fo:inline>
String txt = null;
Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, txt);

        </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1896">

<fo:inline font-weight="bold" color="#7F0055">import</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> com.astamuse.asta4d.render.SpecialRenderer.Clear

Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, Clear);

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.9 </fo:block></fo:block></fo:block><fo:block font-style="italic">Note that on the attribute rendering methods, if null value or SpecialRenderer.Clear are specified, as we mentioned in
      the previous section, the target attribute will be removed and the target element will remain.</fo:block></fo:block><fo:block id="d0e1900"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Render raw Element</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Render raw Element</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An existing DOM element can be replaced by a new element by specifying the new element as the rendering value. The new element
      can be generated by DOM APIs or simply parsed from raw html source.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1905"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1906">


Renderer renderer = Renderer.create();

Element ul = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Element(Tag.valueOf(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"ul"</fo:inline>), <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">""</fo:inline>);
List&lt;Node&gt; lis = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ArrayList&lt;&gt;();
ul.appendChild(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Element(Tag.valueOf(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"li"</fo:inline>), <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">""</fo:inline>).appendText(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"This text is created by snippet.(1)"</fo:inline>));
ul.appendChild(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Element(Tag.valueOf(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"li"</fo:inline>), <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">""</fo:inline>).appendText(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"This text is created by snippet.(2)"</fo:inline>));
ul.appendChild(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Element(Tag.valueOf(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"li"</fo:inline>), <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">""</fo:inline>).appendText(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"This text is created by snippet.(3)"</fo:inline>));

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, ul);

String html = <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;a href=\"https://github.com/astamuse/asta4d\"&gt;asta4d hp&lt;/a&gt;"</fo:inline>;
renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#hp-link"</fo:inline>, ElementUtil.parseAsSingle(html));


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.10 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are several utility methods in ElementUtil that can help you operate DOM easier.</fo:block><fo:block font-style="italic">ElementUtil#parseAsSingle would cause potential cross-site issues, so take care of it and make sure that you have escaped
      all the raw html source correctly. Since Asta4D has provided plenty of rendering methods, you should try your best to avoid
      create element from raw html source. If you have to do something on raw element level, your first option should be DOM APIs
      and parsing raw html source should be your last alternative.</fo:block></fo:block><fo:block id="d0e1912"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Arbitrary rendering for an Element</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Arbitrary rendering for an Element</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes you will want to access the rendering target on raw element level and Asta4D allow you access the rendering
      target element by the interface of ElementSetter. ElementSetter asks the implementation of a callback method "set(Element elem)".
      As a matter of fact, the text rendering and attribute rendering are achieved by built-in implementation of ElementSetter(TextSetter
      and AttributeSetter).There is also another built-in ElementSetter implementation called ChildReplacer which can replace the children of rendering target
      by given element.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1917"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1920">


<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> ChildReplacer <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> ElementSetter {

    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> Element newChild;

    <fo:inline font-weight="bold">/**
     * Constructor
     * 
     * @param newChild
     *            the new child node
     */</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> ChildReplacer(Element newChild) {
        <fo:inline font-weight="bold" color="#7F0055">this</fo:inline>.newChild = newChild;
    }

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> set(Element elem) {
        elem.empty();
        elem.appendChild(newChild);
    }
}

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.11 source of ChildReplacer</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can regard the built-in TextSetter, AttributeSetter and ChildReplacer as
      reference implementation in case of you need implement your own ElementSetter. Following example shows how to use ChildReplacer
      or declare an anonymous class for ElementSetter on rendering.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1924"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1925">


Renderer renderer = Renderer.create();

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ChildReplacer(ElementUtil.parseAsSingle(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"&lt;div&gt;aaa&lt;/div&gt;"</fo:inline>)));

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someNode"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ElementSetter(){
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> set(Element elem) {
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(elem.tagName().equals(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"div"</fo:inline>)){
            elem.addClass(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"someClass);
</fo:inline>        }
    }
});


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.12 </fo:block></fo:block></fo:block><fo:block font-style="italic">On element level, you can also parse element by Element#html(String html) method which will also cause potential
      cross-site issues. As same as the raw element rendering, parsing raw html source should be your last alternative.</fo:block></fo:block><fo:block id="d0e1929"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Recursive rendering</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Recursive rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For a snippet method, the returned Renderer will be applied to the target element which declares the current snippet method.
      In the returned Renderer chain, you can also specify recursive Renderer which is only applied to the element specified by given
      CSS selector.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1934"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1935">

Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"href"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"https://github.com/astamuse/asta4d"</fo:inline>));

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.13 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1937"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Debug renderer</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Debug renderer</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Because the Renderer is applied after your snippet method finished, it is difficult to debug if there is something wrong. Asta4D
      affords rendering debug function too. There are two overloaded debug method, one accepts a log message only and another accepts a log
      message and a selector. The debug renderer will output the current status of rendering target element to log file, if the selector is
      not specified, the whole rendering target of current snippet method will be output, if the selector is specified, only the matched child
      elements will be output. Log level can be configured by "com.astamuse.asta4d.render.DebugRenderer".</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1942"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1943">


<fo:inline font-style="italic" color="#3F5FBF">//the whole target rendering target will be output before and after</fo:inline>

renderer.addDebugger(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"before render value"</fo:inline>);

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someId"</fo:inline>, value);

renderer.addDebugger(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"after render value"</fo:inline>);


<fo:inline font-style="italic" color="#3F5FBF">//only the a tag element will be output before and after</fo:inline>

renderer.addDebugger(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"before render value for link"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a"</fo:inline>);

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"href"</fo:inline>, url);

renderer.addDebugger(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"after render value for link"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a"</fo:inline>);


        </fo:block><fo:inline font-style="italic">If you specified a selector on debugger but do not get any output, it usually means you specified wrong selector or the target
        element has been removed by previous rendering or outer snippet rendering.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.14 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1947"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Missing selector warning</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Missing selector warning</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If your specified selector on rendering method cannot match any element, Asta4D will output a warning message to log as <fo:inline font-style="italic">"There is no element 
      found for selector [#someId] at [ com.astamuse.asta4d.test.render.RenderingTest$TestRender.classAttrSetting(RenderingTest.java:73) ], if it is 
      deserved, try Renderer#disableMissingSelectorWarning() to disable this message and Renderer#enableMissingSelectorWarning could enable this 
      warning again in your renderer chain"</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that the place where the missing selector declared is output to log too, which is disabled by default since it is expensive on production
      environment. You can enable the source row number output by Configuration#setSaveCallstackInfoOnRendererCreation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes, the missing selector may be designed by your logic, you can disable the warning message on your rendering chain temporarily as
      following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1959"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1960">


renderer.disableMissingSelectorWarning();

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#notExistsId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"abc"</fo:inline>);

renderer.enableMissingSelectorWarning();

        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.15 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e1962"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">List rendering</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">List rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D does not only allow you to rendering single value to an element, but also allow you to duplicate elements by list data, which is
      usually used to perform list rendering. java.lang.Iterable of String/Integer/Long/Boolean can be rendered directly as text rendering:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1967"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1968">


Renderer renderer = Renderer.create();

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#strList"</fo:inline>, Arrays.asList(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"a"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"b"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"c"</fo:inline>));

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#intList"</fo:inline>, Arrays.asList(1, 2, 3));

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#longList"</fo:inline>, Arrays.asList(1L, 2L, 3L));

renderer.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#boolList"</fo:inline>, Arrays.asList(true, false, true));


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.16 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On list rendering, the matched element will be duplicated times as the size of the list and the value will be rendered to each duplicated element. You
      can also perform complex rendering for arbitrary list data by RowConvertor:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1972"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1973">


render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForRenderer"</fo:inline>, Arrays.asList(123, 456, 789), <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> RowConvertor&lt;Integer, Renderer&gt;() {
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer convert(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> rowIndex, Integer obj) {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"id-"</fo:inline> + obj).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#otherId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"otherId-"</fo:inline> + obj);
    }
});


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.17 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since we will return Renderer in most cases, the RowConvertor can be replaced by RowRenderer which can omit the type
      declaration of Renderer:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1977"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1978">


render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForRenderer"</fo:inline>, Arrays.asList(123, 456, 789), <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> RowRenderer&lt;Integer&gt;() {
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer convert(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> rowIndex, Integer obj) {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"id-"</fo:inline> + obj).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#otherId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"otherId-"</fo:inline> + obj);
    }
});


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.18 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The returned Renderer by RowConvertor/RowRenderer will be applied to each duplicated element by the given list data.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On list rendering, the rendering method accepts java.lang.Iterable rather than java.util.List, which afford more flexibilities to
      developers. Note that if the given iterable is empty, the target element will be duplicated 0 times, which means the target element
      will be removed.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D also afford parallel list rendering for you, simply use ParallelRowConvertor/ParallelRowRenderer instead of
      RowConvertor/RowRenderer:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e1986"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e1987">


render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#someIdForRenderer"</fo:inline>, Arrays.asList(123, 456, 789), <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ParallelRowRenderer&lt;Integer&gt;() {
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer convert(<fo:inline font-weight="bold" color="#7F0055">int</fo:inline> rowIndex, Integer obj) {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#id"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"id-"</fo:inline> + obj).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#otherId"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"otherId-"</fo:inline> + obj);
    }
});


        </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.19 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The parallel list rendering ability is provided by an utility class called ListConvertUtil which basically provides various
      transform methods for list data conversion like the map function in Scala/Java8. <fo:inline font-style="italic">For Java8, lambda and stream api support will
      be added in future.</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The ListConvertUtil uses a thread pool to perform parallel transforming, the size of pool can be configured by
      Configuration#listExecutorFactory#setPoolSize. There is also an import configuration of ParallelRecursivePolicy. When perform the parallel
      list transforming recursively, thread dead lock would potentially occur, so you have to choose a policy to handle this case:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e1995"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e1996"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>EXCEPTION</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When recursive parallel list transforming is identified, throw an RuntimeException.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2001"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>CURRENT_THREAD</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When recursive parallel list transforming is identified, the child transforming will be performed in the same thread of
          parent transforming without picking up an usable thread from pool.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2006"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>NEW_THREAD</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When recursive parallel list transforming is identified, the child transforming will be performed in a newly generated
          thread out of the configured thread pool, the generated thread will be finished immediately after the child transforming
          finished.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We recommend EXCEPTION or CURRENT_THREAD and the default is EXCEPTION.</fo:block></fo:block></fo:block><fo:block id="d0e2013"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Other things about snippet and rendering</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">11.2. Other things about snippet and rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e2013"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2016">Nested snippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2016"><fo:page-number-citation ref-id="d0e2016"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2029">InitializableSnippet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2029"><fo:page-number-citation ref-id="d0e2029"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2039">Component rendering</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2039"><fo:page-number-citation ref-id="d0e2039"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2064">SnippetInterceptor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2064"><fo:page-number-citation ref-id="d0e2064"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2067">SnippetExtractor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2067"><fo:page-number-citation ref-id="d0e2067"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2070">SnippetResolver</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2070"><fo:page-number-citation ref-id="d0e2070"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2073">SnippetInvoker</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2073"><fo:page-number-citation ref-id="d0e2073"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e2016"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Nested snippet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Nested snippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Snippet can be declared recursively.There is a convention that the outer snippet will always be executed on a prior order.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2021"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2022">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"OuterSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"inner"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">afd:render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"InnerSnippet"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"name"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>name:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>dummy name<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;p</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"age"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>age:<fo:inline font-weight="bold" color="#3F7F7F">&lt;span&gt;</fo:inline>0<fo:inline font-weight="bold" color="#3F7F7F">&lt;/span&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/p&gt;</fo:inline>  
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.20 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the above example, the "InnerSnippet" will be executed after the "OuterSnippet" has been executed, which also means you can
      configure the inner snippet dynamically.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2026"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2027">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> OuterSnippet{

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(){
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#inner"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"hasprofile"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"true"</fo:inline>);
    }

}

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InnerSnippet{

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(bool hasprofile){
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline>(hasprofile){
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#name span"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"Bob"</fo:inline>).add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#age span"</fo:inline>, 27);
        }<fo:inline font-weight="bold" color="#7F0055">else</fo:inline>{
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"*"</fo:inline>, Clear);
        }
    }

}

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.21 </fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2029"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">InitializableSnippet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">InitializableSnippet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The snippet class instance is singleton in request scope and will be created at the first time a snippet is required. 
      After the snippet class instance has been created, field value injection will be applied to the created instance once(About
      detail of value injection, see the later chapter). After all the field has been injected, the framework will check whether
      the current class implements the "InitializableSnippet" interface, if true, the init method of InitializableSnippet will
      be invoked once.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2034"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2035">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> InitSnippet <fo:inline font-weight="bold" color="#7F0055">implements</fo:inline> InitializableSnippet {

    <fo:inline color="gray">@ContextData</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String value;

    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String resolvedValue;

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> init() <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> SnippetInvokeException {
        resolvedValue = value + <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"-resolved"</fo:inline>;
    }
}

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.22 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the above example, the field "value" will be injected after the instance is created, then the init method will be
      applied to finish the complete initialization logic of the snippet class.</fo:block></fo:block><fo:block id="d0e2039"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Component rendering</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Component rendering</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the view first policy, we will treat the template files as first class things. The embed file mechanism allow you
      separate some view blocks as independent components at template file layer. There is also a snippet class level mechanism that
      afford you the same ability as embed file, which is called "Component".</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Why we need "Component"? The embed file can only be include statically, but the "Component" is an extendible Java class
      which can be configured by arbitrary Java code and polymorphism can be easily performed too. Basically, The "Component" mechanism
      can help developer to build independent view component easier than static embed file.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The constructor of Component accepts a string value as an embed file path or an instance of Element, and also an
      optional AttributesRequire can be specified to provide some initialization parameters as same as the parametrized embedding
      introduced in the previous section.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2048"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2051">

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Component(Element elem, AttributesRequire attrs) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        ...
    }

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Component(Element elem) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        ...
    }

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Component(String path, AttributesRequire attrs) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        ...
    }

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Component(String path) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        ...
    }

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.23 constructors of Component</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2053"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2056">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(<fo:inline font-weight="bold" color="#7F0055">final</fo:inline> String ctype) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"span"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Component(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/ComponentRenderingTest_component.html"</fo:inline>, <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> AttributesRequire() {
        <fo:inline color="gray">@Override</fo:inline>
        <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> prepareAttributes() {
            <fo:inline font-weight="bold" color="#7F0055">this</fo:inline>.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"value"</fo:inline>, ctype);
        }

    }));
}

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In this example, the target element specified by the selector "span" will be completely replaced by the result of 
      Component#toElement().</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 11.24 render a component</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Commonly, we do not render a component as above example, we usually extend from Component and expose a constructor
      with business initialization parameters or supply a group of business initialization methods, by which we can build an
      independent view component simply.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Further, Component also has a "toHtml" method which will return the html source of the component rendering result.
      This method can be used by ajax request to acquire a dynamically rendered component.</fo:block></fo:block><fo:block id="d0e2064"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">SnippetInterceptor</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">SnippetInterceptor</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2067"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">SnippetExtractor</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">SnippetExtractor</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2070"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">SnippetResolver</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">SnippetResolver</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2073"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">SnippetInvoker</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">SnippetInvoker</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-var-injection"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">12. Variable injection</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="vi-context"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Context</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">12.1. Context</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...vi-context"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2082">Context/WebApplicationContext</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2082"><fo:page-number-citation ref-id="d0e2082"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-scope">Scope</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-scope"><fo:page-number-citation ref-id="vi-scope"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-ContextBindData">ContextBindData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-ContextBindData"><fo:page-number-citation ref-id="vi-ContextBindData"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="d0e2082"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Context/WebApplicationContext</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Context/WebApplicationContext</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D use "Context" to manage data life cycle. The "Context" in asta4d-core supplies the basic data management mechanism
      and the WebApplicationContext from asta4d-web afford more powerful extending for web application development. Commonly, we will
      only use WebApplicationContext in our application. There are two ways to retrieve an instance of WebApplicationContext.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2087"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2090">

WebApplicationContext context = Context.getCurrentThreadContext();

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.1 Retrieve an instance of WebApplicationContext by static method</fo:block></fo:block></fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2092"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2095">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> PageSnippet {

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render(WebApplicationContext context) {
        ...
    }
}

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.2 Retrieve an instance of WebApplicationContext by injection</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As the name of "getCurrentThreadContext" suggested, the context is managed per thread, and also that the context will be
      initialized before every http request is processed and will be cleared after every http request process has finished.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">WebApplicationContext affords several methods to retrieving raw servlet apis and other helpful information:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2101"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2102"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getRequest</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the HttpServletRequest instance of current request.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2107"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getResponse</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the HttpServletResponse instance of current request.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2112"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getServletContext</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the ServletContext instance of current request.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2117"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getAccessURI</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the rewritten url of current request. For details about URL rewritting, see later chapter.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="vi-scope"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Scope</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Scope</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The context provides a mechanism to manage data by scopes. There are only 3 scopes supplied by asta4d-core's
      Context, but the WebApplicationContext from asta4d-web supply more scopes to help web application development.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Available scopes(with the constant name):</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e2127"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2130" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>global(SCOPE_GLOBAL)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The data saved in global scope can be accessed cross all the contexts, you can treat it as a static object pool.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2136" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>default(SCOPE_DEFAULT)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The data saved in default scope can only be access by the current context.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2142" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>element attribute(SCOPE_ATTR)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>This scope is related to snippet rendering. An element attribute scope is a wrapping of element attribute. When you
            try to retrieve data from element attribute scope, the attribute of current rendering target element will be checked and the
            corresponding attribute value will be returned, further, if there is no corresponding attribute in the current rendering target
            element's attributes, all the parents of current rendering target element will be checked recursively.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2148" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>request(SCOPE_REQUEST)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The data saved in default scope can only be access in the current http request process. Note that the request scope is
            simply delegated to the default scope and it is different from servlet api's http request attribute.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2154" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>path var(SCOPE_PATHVAR)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Path var scope represents the variables declared in url rules.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2160" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>query parameter(SCOPE_QUERYPARAM)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Query parameter scope represents the query parameters specified at the part after question mark in an url.</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2166" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>session(SCOPE_SESSION)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Session scope represents the data saved in http session.</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2172" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>header(SCOPE_HEADER)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Session scope represents the header data from a http request.</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2178" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>cookie(SCOPE_COOKIE)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Cookie scope represents the cookie data from a http request.</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2184" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>flash(SCOPE_FLASH)</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>Asta4D affords a mechanism to allow pass data to the redirected http request, which is called flash data.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the data saved in context can be accessed by variable injection. If you need get data manually, you can do it as
      following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2192"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2195">

WebApplicationContext context = Context.getCurrentThreadContext();

<fo:inline font-style="italic" color="#3F5FBF">//from default scope</fo:inline>
Integer count = context.get(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"saved-count"</fo:inline>);

<fo:inline font-style="italic" color="#3F5FBF">//from session</fo:inline>
Integer sessionCount = context.get(WebApplicationContext.SCOPE_SESSION, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"saved-count"</fo:inline>);

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.3 Retrieve data from context</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can implement your own customized scope or afford you customized implementation for existing scopes. You need extend from
      WebApplicationContext then override the method called "createMapForScope".<fo:inline font-style="italic">(If you only want to split your data from default scope, you
      can simply specify a new scope name and a new scope will be created automatically, the created scope's life cycle is as the same as
      default scope)</fo:inline>
      </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2202"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2205">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MyContext <fo:inline font-weight="bold" color="#7F0055">extends</fo:inline> WebApplicationContext {
    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> ContextMap createMapForScope(String scope) {
        ContextMap map = null;
        <fo:inline font-weight="bold" color="#7F0055">switch</fo:inline> (scope) {
        <fo:inline font-weight="bold" color="#7F0055">case</fo:inline> SCOPE_SESSION: {
            HttpServletRequest request = getRequest();
            map = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> MemcachedSessionMap(request);
        <fo:inline font-weight="bold" color="#7F0055">default</fo:inline>:
            map = <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.createMapForScope(scope);
        }
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> map;
    }
}

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.4 Customized memcached drived session management</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See later chapter of Asta4dServerlet for how to configure Asta4D to use the customized Context implementation instead of the
      default WebApplicationContext.</fo:block></fo:block><fo:block id="vi-ContextBindData"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">ContextBindData</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">ContextBindData</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since all the data query logic are performed at snippet class, we will want to avoid duplicated query on same page
      rendering. The recommended solution is caching your query result by cache library such as ehcache. But Asta4D also affords
      you an alternative solution for some simple cases, which is called ContextBindData.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">ContextBindData can be treated as a lazy load instance field for Java class. It is warranted that a ContextBindData
      will be initialized only once in a same Asta4D context and it will only be initialized when you first call it. There are 
      some exceptions for the warranty about initializing only once, we will explain them later.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2216"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2217">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> PageSnippet {
    
    <fo:inline color="gray">@ContextData</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> <fo:inline font-weight="bold" color="#7F0055">int</fo:inline> count;

    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> ContextBindData&lt;Integer&gt; data = <fo:inline font-weight="bold" color="#7F0055">new</fo:inline> ContextBindData&lt;Integer&gt;(true) {
        <fo:inline color="gray">@Override</fo:inline>
        <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> Integer buildData() {
            <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> count + 1;
        }

    };

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer render() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> Renderer.create(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"*"</fo:inline>, data.get());
    }
}

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.5 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You should have noticed that we pass a "true" to the constructor of ContextBindData, which means we require the warranty
      that it should be only initialize once in the current context. If we pass nothing or pass a "false" to the constructor, the buildData
      method may be invoked multiple times in multi-thread rendering, but which is faster than warranted initialization simply because
      of skipping the multi-thread lock process.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Again, we recommend to use cache library to avoid duplicated query, but you can use ContextBindData as a simple, light weight
      alternative. See detail of <fo:basic-link internal-destination="best-snippet-way"><fo:inline>Section 9.3, “The best way of implementing a snippet”</fo:inline></fo:basic-link>.</fo:block></fo:block></fo:block><fo:block id="vi-injection"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Injection</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">12.2. Injection</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...vi-injection"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-contextdata">@ContextData</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-contextdata"><fo:page-number-citation ref-id="vi-contextdata"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-contextdataset">@ContextDataSet</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-contextdataset"><fo:page-number-citation ref-id="vi-contextdataset"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="vi-ContextDataFinder">ContextDataFinder</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="vi-ContextDataFinder"><fo:page-number-citation ref-id="vi-ContextDataFinder"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2364">DataConvertor</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2364"><fo:page-number-citation ref-id="d0e2364"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2367">ContextDataHolder</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2367"><fo:page-number-citation ref-id="d0e2367"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="vi-contextdata"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">@ContextData</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">@ContextData</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All fields annotated by @ContextData in a snippet class will be initialized/injected automatically when the snippet class instance is initialized.
      Further, even the method parameters of snippet rendering method and request handle method are automatically injected, you can still customize the injection
      by extra @ContextData annotation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that there are something different between field injection and method parameter injection. The fields of snippet class without @ContextData will 
      not be injected, but method parameters will be always injected even without @ContextData.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Available configurations of @ContextData:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e2235"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2238" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>name</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The name of saved data in context. If it is not specified, the field name or parameter name will be used(This requires that you reverse the parameter names
            when compile).
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2244" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>scope</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The scope of saved data in context. If it is no specified, Asta4D will try to search the data in all the scopes by a predefined order:</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e2250"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2251"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>element attribute(SCOPE_ATTR)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2254"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>path var(SCOPE_PATHVAR)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2257"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>query parameter(SCOPE_QUERYPARAM)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2260"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>flash(SCOPE_FLASH)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2263"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>cookie(SCOPE_COOKIE)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2266"><fo:list-item-label end-indent="label-end()"><fo:block>6.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>hearder(SCOPE_HEADER)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2269"><fo:list-item-label end-indent="label-end()"><fo:block>7.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>request/default(SCOPE_REQUEST/SCOPE_DEFAULT)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2272"><fo:list-item-label end-indent="label-end()"><fo:block>8.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>session(SCOPE_SESSION)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2275"><fo:list-item-label end-indent="label-end()"><fo:block>9.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>global(SCOPE_GLOBAL)</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This order can be configured via WebApplicationContextDataFinder#setDataSearchScopeOrder.See details at <fo:basic-link internal-destination="vi-ContextDataFinder"><fo:inline>the section called “ContextDataFinder”</fo:inline></fo:basic-link></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2281" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>typeUnMatch</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>The policy of how to handle the unmatched type on data conversion. The default action is throw Exception and another two value of "DEFAULT_VALUE" and "DEFAULT_VALUE_AND_TRACE"
            can be specified.
            </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are several scope specified annotations can be used as convenience.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2289"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2290"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@SessionData</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2293"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@QueryParam</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2296"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@PathVar</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2299"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@HeaderData</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2302"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@CookieData</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2305"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>@FlashData</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block font-style="italic">All the above annotation have the same configurable items with the original @ContextData annotation except being fixed with according data scope.</fo:block></fo:block><fo:block id="vi-contextdataset"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">@ContextDataSet</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">@ContextDataSet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A pojo class annotated by @ContextDataSet will be treated as a variable holder. If the type of a snippet class field or a method parameter is a class annotated by
      @ContextDataSet, when Asta4D do injection, a new instance will be created at first, then all the fields of current instance will be scanned and all the fields annotated by
      @ContextData will be injected as same as the snippet class field injection. @ContextDataSet can be used to allocate all of the form data into one single instance as a
      convenience.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2315"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2316">

<fo:inline color="gray">@ContextDataSet</fo:inline>
<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySet {

    <fo:inline color="gray">@ContextData</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> f1;

    <fo:inline color="gray">@ContextData</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> String f2;

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> getF1() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> f1;
    }
    
    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> String getF2() {
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> f2;
    }
}

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet {

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> render(MySet holder) {
    }

}

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">static</fo:inline> <fo:inline font-weight="bold" color="#7F0055">class</fo:inline> MySnippet2 {

    <fo:inline color="gray">@ContextData</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">private</fo:inline> MySet holder;

    <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> render() {
    }

}




      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that even you declared @ContextDataSet on the class, you still need to declare the @ContextData on the field declaration. For method parameter, it is not necessary
      since all the parameters are injected automatically. Further, for a declared @ContextDataSet, you still need to declare @ContextData on every field you want to be injected.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 12.6 </fo:block></fo:block></fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Available configurations of @ContextData:</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" id="d0e2320"><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2323" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>singletonInContext</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>A boolean value to indicate that whether the target ContextDataSet should be singleton in a single context life cycle. The default value is false, which means a new instance
            would be created at every time when a ConextDataSet is required to inject.
            </fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2329" keep-together.within-column="always" keep-with-next.within-column="always"><fo:inline>factory</fo:inline></fo:block><fo:block margin-left="0.25in"><fo:block>A factory class can be used to indicate how to create an instance of ContextDataSet. The default factory will call Class#newInstance() to create a new instance of ContextDataSet.
            </fo:block></fo:block></fo:block></fo:block><fo:block id="vi-ContextDataFinder"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">ContextDataFinder</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">ContextDataFinder</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D search data in context by pre configured ContextDataFinder implementation. The default implementation is WebApplicationContextDataFinder. You can supply your own
      search mechanism by implementing the ContextDataFinder interface or extending from WebApplicationContextDataFinder. WebApplicationContextDataFinder defines the scope search
      order if scope is not specified, and also returns some special data by hard coding type check:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2340"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2341"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Context/WebApplicationContext</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2344"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>ResourceBundleHelper</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2347"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>ParamMapResourceBundleHelper</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2350"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>HttpServletRequest</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2353"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>HttpServletResponse</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2356"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>ServletContext</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2359"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>UrlMappingRule</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The first 3 types are afforded by the parent class of WebApplicationContextDataFinder: DefaultContextDataFinder. To supply your own logic, you can override the 
      findDataInContext method and the WebApplicationContextDataFinder's source can be treated as reference implementation.</fo:block></fo:block><fo:block id="d0e2364"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">DataConvertor</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">DataConvertor</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2367"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">ContextDataHolder</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">ContextDataHolder</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-url-rule"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">13. URL rule</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="rule-apis"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Rule apis</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">13.1. Rule apis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...rule-apis"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="UrlMappingRuleInitializer">UrlMappingRuleInitializer</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="UrlMappingRuleInitializer"><fo:page-number-citation ref-id="UrlMappingRuleInitializer"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2448">Handy rules</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2448"><fo:page-number-citation ref-id="d0e2448"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block id="UrlMappingRuleInitializer"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">UrlMappingRuleInitializer</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">UrlMappingRuleInitializer</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All the url mapping rules can be supplied by implementing the UrlMappingRuleInitializer interface which can be configured by 
      WebApplicationConfiguration#setUrlMappingRuleInitializer.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">UrlMappingRuleInitializer's initUrlMappingRules method does not return configured rules directly, it supply a UrlMappingRuleHelper
      instance by parameter instead. The UrlMappingRuleHelper afford a group of methods to help developers build url mapping rules.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">UrlMappingRuleHelper allows add new rule by add methods, which will be discussed in next section, let us see the global configuration
      methods of UrlMappingRuleHelper at first.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2385"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2386"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addDefaultRequestHandler(Object... handlerList)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2389"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addDefaultRequestHandler(String attribute, Object... handlerList)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are two overloaded methods of addDefaultRequestHandler. Added request handlers without attribute declaration will be applied 
          to all the rules and the ones with attribute declaration will be applied to therules with same attribute only.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2396"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addGlobalForward(Object result, String targetPath)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2399"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addGlobalForward(Object result, String targetPath, int status) </fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are two overloaded methods of addGlobalForward. The one with status parameter can customize the http response code with specified
          status code or the default code 200 will be returned to client.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2406"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addGlobalRedirect(Object result, String targetPath) </fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A global redirect result mapping can be declared. There is a convention about the format of target path(the normal redirect on special rules follows
          the same convention):</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2412"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2413"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>common url string("http://www.example.com/somepage.html")</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The target url will be redirected as temporary(code 302).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2418"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>common url string with prefix("301:http://www.example.com/somepage.html")</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The target url will be redirected as specified code by the prefix. 301 or 302 are acceptable and "p" or "t" can be used to represent "permanent"
              or "temporary" as well(which means "301:http://www.example.com/somepage.html" equals to "p:http://www.example.com/somepage.html").</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2424"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addRequestHandlerInterceptor(Object... interceptorList)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2427"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>addRequestHandlerInterceptor(String attribute, Object... interceptorList)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">The request handler interceptor is need to be clarified more in the implementation. We skip the description at present.</fo:inline></fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2434"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>registerRestTransformer(ResultTransformer transformer)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2437"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>registerJsonTransformer(ResultTransformer transformer)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The returned value of a request handler which is declared as json at rule will be transformed to standard json string, and developers can still
                register a customized result transformer to generate the response by the own way. Further, even the framework will do nothing on the returned value
                of a handler if which is declared on a rest rule, developer can still use "registerRestTransformer" to add customized result transforming on a rule
                declared as rest.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2443"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>setDefaultMethod(HttpMethod defaultMethod) </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The default matching http method for url patterns without http method specified. The default value is GET.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="d0e2448"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Handy rules</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Handy rules</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There several add methods from UrlMappingRuleHelper which can be used to add new url rules. According to the certain being called add method, different
      interface which is called handy rules will be returned for further declaration. Further, all the methods of the returned handy rule interface will return different
      interface according to the certain method you are calling, it is complex to describe which interface will be returned on certain case, basically we suppose that 
      the code auto completion function of you editor would help you to know what you can do in the next step.  All of these handy rules and their methods can be treated
      as a group of DSL to help you build your own url rules for your site. We will describe all the available methods at following regardless of which certain interface
      it belongs to. After that, we will also describe the basic rule of how the returned handy rules change.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2453"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2454"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add(String sourcePath)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2457"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add(String sourcePath, String targetPath) </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2460"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add(HttpMethod method, String sourcePath) </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2463"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>add(HttpMethod method, String sourcePath, String targetPath)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a new url rule. If the http method is not specified. the configured default method(see above setDefaultMethod) will be specified by default. If you
          want the sourcePath is matched to all the http methods, null can be specified. The targetPath should be a template file path or a redirect target url string
          with prefix "redirect:", the part after prefix "redirect:" follows the convention of redirect string format introduced in global redirect configuration.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2470"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>id(String id)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">One added rule can be identified by a unique id.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2477"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>reMapTo(String ruleId)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multi url patterns can be mapped to the same rule by reMapTo method. See following sample:
          </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2483"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2486">

    rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/index.html"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"index-page"</fo:inline>);
    
    rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/index"</fo:inline>).reMapTo(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"index-page"</fo:inline>);
    
    rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>).id(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"app-handler"</fo:inline>)
         .handler(LoginHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>)
         .handler(EchoHandler.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>)
         .forward(LoginFailure.<fo:inline font-weight="bold" color="#7F0055">class</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/error.html"</fo:inline>)
         .forward(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/templates/success.html"</fo:inline>);
    
    rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/ex-handler"</fo:inline>).reMapTo(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"app-handler"</fo:inline>).attribute(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"ex-handler"</fo:inline>);
        

          </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In above sample, "/app/index" will be treated as same as the rule identified as "index-page" which sourc path is "/app/". Aslo the "/app/ex-handler"
          will be configured as same as "/app/handler" with its special attribute configuration "ex-handler". Special path variable and priority can be configured to
          remapped rules as well.</fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 13.1 Remap the rule to a existing rule</fo:block></fo:block></fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2491"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>attribute(String attribute)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multi attributes can be configured to a rule. The attributes can be used by global rule configurations to add certain extra operations on certain urls
          which is attributed by certain attribute.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2498"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>var(String key, Object value)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Static path variables can be configured by this method, that can be accessed by context's path var scope and also can be automatically injected to snippets
          or request handlers.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2505"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>handler(Object... handlerList)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Request handlers can be configured by this methods. Multi request handlers are acceptable and the details about multi request handlers will be explained in
          later section.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The parameter of handler method can be arbitrary type: an instance of java.lang.Class or an arbitrary instance.  The framework explains received parameters by
          the implementation of DeclareInstanceResolver configured by WebApplicationConfiguration. The default implementation provided by framework follows the following rules
          to explain the declaration of request handler:</fo:block><fo:list-block provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e2513"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2514"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If an instance of java.lang.Class is specified, the instance of request handler will be created by invoke "newInstance()"
                on the specified Class.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2517"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If a string is specified, the string will be treated as a class name and an instance of java.lang.Class will be created by 
                calling "Class#forName", then the instance of request handler will be created by invoke "newInstance()" on the created Class.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2520"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>The specified parameter will be treated as a request handler directly if it is neither a Class nor a string. By this rule,
                it is interesting that we can declare an anonymous class as a request handler:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2523"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2524">

rules.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/app/handler"</fo:inline>)  
     .handler(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> Object(){  
        <fo:inline color="gray">@RequestHandler</fo:inline>  
        <fo:inline font-weight="bold" color="#7F0055">public</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> handle(){  
            <fo:inline font-style="italic" color="#3F5FBF">//  </fo:inline>
        }  
     }); 

                  </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 13.2 </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block font-style="italic">The asta4d-spring package also provides a resolver based on Spring IOC container, the request handler instance will be retrieved by
            passing the specified parameter to the "Context#getBean" method of spring container. See details of integration of Spring IOC.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2529"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>forward(String targetPath)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2532"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>forward(String targetPath, int status)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2535"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>forward(Object result, String targetPath)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2538"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>forward(Object result, String targetPath, int status)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The request will be forwarded to the target template file with specified status code. The result parameter will be used to match the result from 
          request handler(if there is any request handler configured for current rule).About result matching, see details in next section.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2545"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>redirect(String targetPath)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2548"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>redirect(Object result, String targetPath)</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As the same as forward, the request will be redirected(301/302) to the target path. The target path string follows the convention  of redirect string 
          format introduced in global redirect configuration.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2555"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>json()</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The result of request handler will be converted to a json string and be returned the client with MIME type "application/json".
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2562"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>rest()</fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This method does nothing for the current url by default, but declared as a hint that suggests the current rule will act as a restful api and will return customized
          response which would be head only response in many cases.
          </fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="d0e2569"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Request handler result process</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">13.2. Request handler result process</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...d0e2569"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2574">Content provider</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2574"><fo:page-number-citation ref-id="d0e2574"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2577">Result transforming</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2577"><fo:page-number-citation ref-id="d0e2577"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="d0e2580">Request handler chain</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="d0e2580"><fo:page-number-citation ref-id="d0e2580"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section will describe some internal mechanism of how asta4d handle the result from a request handler. Especially for the part of result transforming, which is not
    necessary for normal development but can help you understand how the request handler chain works.</fo:block><fo:block id="d0e2574"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Content provider</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Content provider</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2577"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Result transforming</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Result transforming</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2580"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Request handler chain</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Request handler chain</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-form-flow"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">14. details of form flow</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block font-style="italic">To be written.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-detail-i18n"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">15. i18n</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="i18n-message"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">message stringization</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">15.1. message stringization</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" id="toc...i18n-message"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em"><fo:block space-after="0.5em">Table of Contents</fo:block></fo:block></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-I18nMessageHelper">I18nMessageHelper</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-I18nMessageHelper"><fo:page-number-citation ref-id="i18n-I18nMessageHelper"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-MessagePatternRetriever">MessagePatternRetriever</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-MessagePatternRetriever"><fo:page-number-citation ref-id="i18n-MessagePatternRetriever"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-default-locale-decision">Default locale</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-default-locale-decision"><fo:page-number-citation ref-id="i18n-default-locale-decision"/></fo:basic-link></fo:inline></fo:block><fo:block text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="i18n-afd-msg">afd:msg</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"> <fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" keep-with-next.within-line="always"/> <fo:basic-link internal-destination="i18n-afd-msg"><fo:page-number-citation ref-id="i18n-afd-msg"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D affords basic i18n support by a built-in I18nMessageHelper. I18nMessageHelper requires a MessagePatternRetriever implementation 
      to retrieve message by key. There is also a default implementation JDKResourceBundleMessagePatternRetriever which uses the JDK's built-in 
      resource bundle mechanism. 
    </fo:block><fo:block id="i18n-I18nMessageHelper"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">I18nMessageHelper</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">I18nMessageHelper</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">I18nMessageHelper is an abstract classes which affords the basic interface for handling messages:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2601"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2602"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getMessage(String key)</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2606"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getMessage(Locale locale, String key);</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2610"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getMessageWithDefault(String key, Object defaultPattern)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">return defaultPattern#toString() if message not found</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2616"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>getMessageWithDefault(Locale locale, String key, Object defaultPattern)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">return defaultPattern#toString() if message not found</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are also two extended classes from I18nMessageHelper, which afford more flexible message functionalities especially about formatting message by given parameters. 
            Configuration#setI18nMessageHelper can be used to customized which helper you want to use. The default is OrderedParamI18nMessageHelper.
            (<fo:inline font-style="italic">I18nMessageHelperTypeAssistant#getConfiguredMappedHelper and I18nMessageHelperTypeAssistant#getConfiguredOrderedHelper can be used to retrieve a type safe 
              configured helper.</fo:inline>)
      </fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2627"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2628"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>MappedParamI18nMessageHelper</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Allow format message by a given parameter map, A MappedValueFormatter is required to supply concrete formatting style and the default is
                  ApacheStrSubstitutorFormatter which uses StrSubstitutor from Apache Common lang3.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2634"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>OrderedParamI18nMessageHelper(default)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Allow format message by a given parameter array. A OrderedValueFormatter is required to supply concrete formatting style and the default is 
                   JDKMessageFormatFormatter which uses JDK's MessageFormat to format message string.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are several value formatter can be used by the above helpers. Notice that The MappedParamI18nMessageHelper requires implementation of MappedValueFormatter and the 
            OrderedParamI18nMessageHelper requires implementation of OrderedValueFormatter.
      </fo:block><fo:block xmlns:rx="http://www.renderx.com/XSL/Extensions" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" keep-together.within-column="auto" id="d0e2642"><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-next.within-column="always">Table 15.1. Built-in value formatters</fo:block><fo:table border-before-width.conditionality="retain" border-collapse="collapse" border-start-style="solid" border-end-style="solid" border-top-style="solid" border-bottom-style="solid" border-start-width="0.1pt" border-end-width="0.1pt" border-top-width="0.1pt" border-bottom-width="0.1pt" border-start-color="black" border-end-color="black" border-top-color="black" border-bottom-color="black" table-layout="fixed" width="100%"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-column column-number="4" column-width="proportional-column-width(1)"/><fo:table-header start-indent="0pt" end-indent="0pt"><fo:table-row keep-with-next.within-column="always"><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block font-weight="bold">formatter</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block font-weight="bold">interface</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block font-weight="bold">Description</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block font-weight="bold">Example</fo:block></fo:table-cell></fo:table-row></fo:table-header><fo:table-body start-indent="0pt" end-indent="0pt"><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>ApacheStrSubstitutorFormatter(default)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>MappedValueFormatter</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>Use Apache Commons Lang's <fo:basic-link external-destination="url(http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/text/StrSubstitutor.html#replace(java.lang.CharSequence))">
          StrSubstitutor#replace</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/text/StrSubstitutor.html#replace(java.lang.CharSequence))">http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/text/StrSubstitutor.html#replace(java.lang.CharSequence)</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> to format messages. Use "{" and "}" to represent variables place holder.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>"There are {count} items in the {item-name} list."</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>JDKMessageFormatFormatter(default)</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>OrderedValueFormatter</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>Use JDK's <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html#format(java.lang.String, java.lang.Object...))">
          MessageFormat#format</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline> <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html#format(java.lang.String, java.lang.Object...))">http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html#format(java.lang.String, java.lang.Object...)</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> to format messages.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-bottom-width="0.1pt" border-bottom-style="solid" border-bottom-color="black" text-align="left"><fo:block>"There are {1} items in the {2} list."</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>SymbolPlaceholderFormatter</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>OrderedValueFormatter</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" border-end-width="0.1pt" border-end-style="solid" border-end-color="black" text-align="left"><fo:block>Use JDK's <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String, java.lang.Object...))">
          String#format</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline> <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String, java.lang.Object...))">http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String, java.lang.Object...)</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> to format messages.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="4pt" padding-bottom="4pt" padding-left="4pt" padding-right="4pt" text-align="left"><fo:block>"There are %d items in the %s list."</fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:block><fo:block id="i18n-MessagePatternRetriever"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">MessagePatternRetriever</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">MessagePatternRetriever</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The I18nMessageHelper requires a MessagePatternRetriever implementation to retrieve message by key. There is a default implementation 
            JDKResourceBundleMessagePatternRetriever which uses the JDK's built-in resource bundle mechanism. The base name of resource bundle
            files can be specified by JDKResourceBundleMessagePatternRetriever#setResourceNames which accepts a list of base name. The configured resource bundles will be passed to JDK's
            <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html#getBundle(java.lang.String, java.util.Locale, java.lang.ClassLoader))">
            ResourceBundle#getBundle(String baseName, Locale locale, ClassLoader loader)</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">4</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">4</fo:inline> <fo:basic-link external-destination="url(http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html#getBundle(java.lang.String, java.util.Locale, java.lang.ClassLoader))">http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html#getBundle(java.lang.String, java.util.Locale, java.lang.ClassLoader)</fo:basic-link></fo:block></fo:footnote-body></fo:footnote> to retrieve messages.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As the implementation of JDKResourceBundleMessagePatternRetriever, if the given locale is null, the default locale decision mechanism will be performed. 
            See <fo:basic-link internal-destination="i18n-default-locale-decision"><fo:inline>the section called “Default locale”</fo:inline></fo:basic-link>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Further, the JDKResourceBundleMessagePatternRetriever accepts ResourceBundleFactory to allow customize how to retrieve a resource bundle. The default is        
            CharsetResourceBundleFactory which allows specify the encoding of message bundle files. Another built-in implementation is the LatinEscapingResourceBundleFactory,
            as the name suggests, the message files must be escaped by JDK's standard mechanism(via native2ascii).
      </fo:block></fo:block><fo:block id="i18n-default-locale-decision"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Default locale</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">Default locale</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The default locale will be decided by the following order and stop at the first non-null returned value.</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e2716"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2717"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Context.getCurrentThreadContext().getCurrentLocale()</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2720"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Locale.getDefault()</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2723"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Locale.ROOT</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block font-style="italic">Since the Locale.getDefault() will return the local machine's locale by default, you may need to override the default locale to ROOT at the staring of 
              your web application.</fo:block></fo:block><fo:block id="i18n-afd-msg"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">afd:msg</fo:marker><fo:block font-size="12.5pt" space-before.optimum="0.6em" space-before.minimum="0.6em" space-before.maximum="0.6em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">afd:msg</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">"afd:msg" tag can be used to declare an i18n aware message in a template file. The basic usage is as following:</fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2733">

<fo:inline font-weight="bold" color="#3F7F7F">&lt;section&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;article&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- the inner html will be treated as default message if the key is not found in message bundle --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"notexistingkey"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.notexistingkey"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"parameter works as well."</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>text here to be treated as default message.{0}<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- simply specify parameters on tag --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"4"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>dummy text<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"7"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">locale</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ja_JP"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>dummy text<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- the parameter can be rendered by snippet too --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:snippet</fo:inline> <fo:inline font-weight="bold" color="#7F007F">render</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ComplicatedSnippet:setMsgParam"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"4"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>dummy text<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.peoplecount"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"7"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">locale</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ja_JP"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>dummy text<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:snippet&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- attribute started with "@" will be treated as a key --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">@p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport.sunny"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>天気<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">@p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport.sunny"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">locale</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ja_JP"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>天気<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- attribute started with "#" will be treated as a sub key of current key, thus sample.weatherreport.sunny will be searched --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">#p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"rain"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>天気<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.weatherreport"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">#p0</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"rain"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">locale</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ja_JP"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>天気<fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel panel-default"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;div</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"panel-body"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- treat message as text --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.textUrl"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- treat message as html --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.htmlUrl"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
            
            <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- treat message as text even it begins with html: --&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;afd:msg</fo:inline> <fo:inline font-weight="bold" color="#7F007F">key</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"sample.escapedUrl"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/afd:msg&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;br/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&lt;/div&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/article&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/section&gt;</fo:inline>

      </fo:block><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2735">

<fo:inline font-weight="bold" color="#7F0055">public</fo:inline> Renderer setMsgParam() {
    Renderer render = Renderer.create();
    render.add(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"#peoplecount"</fo:inline>, <fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"p0"</fo:inline>, 15);
    <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> render;
}

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are something need to be explained:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2739"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2740"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>default message</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As commented in the source, the inner content of "afd:msg" will be treated as default message in case of the message of specified key cannot be found. 
                  Note that the default message will be formatted by specified parameters too.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This mechanism can also be used as a simple text replacing mechanism in the html template file in case of necessity.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2748"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>parameter name</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the configured I18nMessageHelper is MappedParamI18nMessageHelper, the attribute names of current "afd:msg" element will be treated as parameter names directly.
                  And if the configured I18nMessageHelper is OrderedParamI18nMessageHelper which is the default one, the attribute names started with single "p" and following with
                  0-started numbers will be treated as the values of parameter value array.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2754"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>recursive parameter</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The attributes which name started with "@" or "#" will be treated as recursive message's key. The different between "@" and "#" is that the "@" will be treated as a
                  complete key but the "#" will be treated as a sub key of current message key.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2760"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>parameter value</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The value of attributes can be specified directly in the html template file, also can be rendered by a snippet as in the above example.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2766"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>locale</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Locale can be specified explicitly by ISO 639 locale string, if not, the default locale decision mechanism will be performed. 
                 See <fo:basic-link internal-destination="i18n-default-locale-decision"><fo:inline>the section called “Default locale”</fo:inline></fo:basic-link>.</fo:block><fo:block/></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="i18n-file-search"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">file search order</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">15.2. file search order</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The built-in template resolver and static resource handler can match the target file name with awareness of locale. The match locale will be decided by the default locale
          decision mechanism(See <fo:basic-link internal-destination="i18n-default-locale-decision"><fo:inline>the section called “Default locale”</fo:inline></fo:basic-link>). After the locale is decided, for example, for a locale as Locale("fr", "CA", "UNIX") to search a 
          html template file "index.html", the target file will be searched by following order:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e2781"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2782"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>index_fr_CA_UNIX.html</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2785"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>index_fr_CA.html</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2788"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>index_fr.html</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2791"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>index.html</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the static resource files such as js, css, jpg, etc. will be searched by the same order as well.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="overview"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">16. Asta4dServlet and configuration</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="d0e2799"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Asta4dServlet</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">16.1. Asta4dServlet</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All the http requests are handled by Asta4dServlet which allows developers to override several methods to customize
    its actions. The web.xml would be like following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2804"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2805">

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<fo:inline font-weight="bold" color="#3F7F7F">&lt;web-app</fo:inline> <fo:inline font-weight="bold" color="#7F007F">version</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"2.5"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">xmlns</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://java.sun.com/xml/ns/javaee"</fo:inline>
    <fo:inline font-weight="bold" color="#7F007F">xmlns:xsi</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://www.w3.org/2001/XMLSchema-instance"</fo:inline>
    <fo:inline font-weight="bold" color="#7F007F">xsi:schemaLocation</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>

    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- standalone without spring --&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-name&gt;</fo:inline>Asta4D Servlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-name&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-class&gt;</fo:inline>com.astamuse.asta4d.web.servlet.Asta4dServlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-class&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;load-on-startup&gt;</fo:inline>1<fo:inline font-weight="bold" color="#3F7F7F">&lt;/load-on-startup&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet&gt;</fo:inline>

    <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-mapping&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-name&gt;</fo:inline>Asta4D Servlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-name&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;url-pattern&gt;</fo:inline>/<fo:inline font-weight="bold" color="#3F7F7F">&lt;/url-pattern&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-mapping&gt;</fo:inline>
<fo:inline font-weight="bold" color="#3F7F7F">&lt;/web-app&gt;</fo:inline>


      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.1 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following methods can be overridden:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em" id="d0e2809"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2810"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>createConfiguration()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overriding this methods allows developers to configure the framework by code. </fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2815"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2816">

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> WebApplicationConfiguration createConfiguration() {
        WebApplicationConfiguration conf = <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.createConfiguration();
        
        conf.setSnippetResolver(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> DefaultSnippetResolver() {

            <fo:inline color="gray">@Override</fo:inline>
            <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> Object createInstance(String snippetName) <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> SnippetNotResovlableException {
                <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.createInstance(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"com.astamuse.asta4d.sample.snippet."</fo:inline> + snippetName);
            }

        });
        
        conf.setUrlMappingRuleInitializer(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> UrlRules());
        
        conf.getPageInterceptorList().add(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> SamplePageInterceptor());
        
        <fo:inline font-weight="bold" color="#7F0055">return</fo:inline> conf;
    }

          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.2 </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2818"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>service()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Developers can intercept the http request by overriding this method. The following example shows how to rewrite the access url by adding pre request logic:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2823"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2824">

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> service() <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        WebApplicationContext context = Context.getCurrentThreadContext();
        HttpServletRequest request = context.getRequest();
        String requestURI = request.getRequestURI();
        <fo:inline font-weight="bold" color="#7F0055">if</fo:inline> (requestURI.startsWith(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"/abc/"</fo:inline>)) {
            context.setAccessURI(requestURI.substring(5));
        }
        <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.service();
    }

          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.3 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Request time measuring can be performed too:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2828"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2829">

    <fo:inline color="gray">@Override</fo:inline>
    <fo:inline font-weight="bold" color="#7F0055">protected</fo:inline> <fo:inline font-weight="bold" color="#7F0055">void</fo:inline> service() <fo:inline font-weight="bold" color="#7F0055">throws</fo:inline> Exception {
        <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> startTime = System.currentTimeMillis();
        <fo:inline font-weight="bold" color="#7F0055">try</fo:inline> {
            <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.service();
        } <fo:inline font-weight="bold" color="#7F0055">finally</fo:inline> {
            <fo:inline font-weight="bold" color="#7F0055">long</fo:inline> endTime = System.currentTimeMillis();
            System.out.println(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"request time:"</fo:inline> + (endTime - startTime));
        }
    }

          </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.4 </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2831"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>createAsta4dContext()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overriding this methods allows developers to afford customized Context implementation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2836"><fo:list-item-label end-indent="label-end()"><fo:block>•</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>createConfigurationInitializer()</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overriding this methods allows developers to customize the configuration file initialization logic. See details at next section.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="d0e2841"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Configuration file</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">16.2. Configuration file</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the previous section, we introduced that Asta4D can be configured by overriding createConfiguration() method and we also introduced a method called 
    createConfigurationInitializer which allows customize the configuration file initialization logic. Asta4D allows to be configured by an extra configuration file
    which will be analyzed by the created configuration initializer. </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The default implementation of configuration initializer will seek the configuration file by following order:</fo:block><fo:list-block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.2em" id="d0e2848"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2849"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Calling retrievePossibleConfigurationFileNames(Overridable) to retrieve all possible configuration file names which could be an array of String. The default value
        is "asta4d.conf.properties" only.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2852"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Search all the possible names in classpath by order. The first found one will be used.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2855"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If there is no configuration file found in classpath, calling retrieveConfigurationFileNameKey(Overridable) to get a key. The default key is "asta4d.conf".</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2858"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>Retrieve the value of key retrieve in previous step by the order as: ServletConfig, JDNI Context, System properties.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="d0e2861"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block>If there is a value found in the previous step, open a file as configuration file by treating the found value as a file path.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As mentioned above, the two methods of retrievePossibleConfigurationFileNames and retrieveConfigurationFileNameKey can be overridden to customize configuration
    file name and the file path can be also configured by the key "asta4d.conf" at servlet mapping configuration(ServletConfig), JDNI configuration(JDNI context) or command 
    line parameter(System properties).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Further, the default implementation does only support the format of configuration file as Java standard properties file. All the configured key/value will be treated
    as setXXX method calling on WebApplicationConfiguration instance. The key can be a dot split string which will be treated as recursive property accessing on 
    WebApplicationConfiguration instance.</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2868"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2869">

<fo:inline font-weight="bold" color="#7F007F">urlMappingRuleInitializer</fo:inline>=com.astamuse.asta4d.sample.UrlRules

<fo:inline font-weight="bold" color="#7F007F">cacheEnable</fo:inline>=false

<fo:inline font-weight="bold" color="#7F007F">snippetExecutorFactory.threadName</fo:inline>=asta4d-sample-snippet
<fo:inline font-weight="bold" color="#7F007F">snippetExecutorFactory.poolSize</fo:inline>=100

<fo:inline font-weight="bold" color="#7F007F">listExecutorFactory.threadName</fo:inline>=asta4d-sample-list
<fo:inline font-weight="bold" color="#7F007F">listExecutorFactory.poolSize</fo:inline>=100

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.5 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The above configuration equals to the following source:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2873"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2874">

WebApplicationConfiguration conf = <fo:inline font-weight="bold" color="#7F0055">super</fo:inline>.createConfiguration();

conf.setUrlMappingRuleInitializer(<fo:inline font-weight="bold" color="#7F0055">new</fo:inline> UrlRules());

conf.setCacheEnable(false);

((DefaultExecutorServiceFactory) conf.getSnippetExecutorFactory()).setThreadName(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"asta4d-sample-snippet"</fo:inline>);
((DefaultExecutorServiceFactory) conf.getSnippetExecutorFactory()).setPoolSize(100);

((DefaultExecutorServiceFactory) conf.getListExecutorFactory()).setThreadName(<fo:inline font-weight="bold" font-style="italic" color="#2A00FF">"asta4d-sample-list"</fo:inline>);
((DefaultExecutorServiceFactory) conf.getListExecutorFactory()).setPoolSize(100);

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 16.6 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All the configurable items can be found at <fo:basic-link external-destination="url(http://astamuse.github.io/asta4d/javadoc/0.14.5.1-SNAPSHOT/com/astamuse/asta4d/web/WebApplicationConfiguration.html)">JavaDoc</fo:basic-link><fo:footnote><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline><fo:footnote-body font-family="Helvetica,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="false" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="Helvetica,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline> <fo:basic-link external-destination="url(http://astamuse.github.io/asta4d/javadoc/0.14.5.1-SNAPSHOT/com/astamuse/asta4d/web/WebApplicationConfiguration.html)">http://astamuse.github.io/asta4d/javadoc/0.14.5.1-SNAPSHOT/com/astamuse/asta4d/web/WebApplicationConfiguration.html</fo:basic-link></fo:block></fo:footnote-body></fo:footnote>.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="false" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block>Asta4D User Guide</fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block/></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="Helvetica" margin-left="-5em" margin-right="-5em"/></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-column column-number="1" column-width="proportional-column-width(1)"/><fo:table-column column-number="2" column-width="proportional-column-width(1)"/><fo:table-column column-number="3" column-width="proportional-column-width(1)"/><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block/></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:page-number/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" margin-left="0cm"/></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="0pt" end-indent="0pt"><fo:block id="chapter-integration-spring"><fo:block font-family="Helvetica,Symbol,ZapfDingbats"><fo:block margin-left="0cm"><fo:block text-align="left" font-weight="bold" font-size="24.8832pt"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0cm" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">17. Integration with Spring</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="integrate-spring-ioc"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Integrate with Spring IOC</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">17.1. Integrate with Spring IOC</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D can be integrated with any dependency injection mechanism. We will introduce how to integrate with Spring IOC 
    as example.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is a package called asta4d-spring which supplies reference implementation to show how to integrate a DI container 
    to Asta4D. Firstly, as an alternative for Asta4dServlet introduced in the  previous chapter, SpringInitializableServlet can be 
    used to initialize Spring configuration automatically. The web.xml file should be like following:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2891"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2892">

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<fo:inline font-weight="bold" color="#3F7F7F">&lt;web-app</fo:inline> <fo:inline font-weight="bold" color="#7F007F">version</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"2.5"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">xmlns</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://java.sun.com/xml/ns/javaee"</fo:inline>
    <fo:inline font-weight="bold" color="#7F007F">xmlns:xsi</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://www.w3.org/2001/XMLSchema-instance"</fo:inline>
    <fo:inline font-weight="bold" color="#7F007F">xsi:schemaLocation</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>

    <fo:inline font-style="italic" color="#3F5FBF">&lt;!-- integrate with spring --&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-name&gt;</fo:inline>Asta4D Servlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-name&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-class&gt;</fo:inline>com.astamuse.asta4d.misc.spring.SpringInitializableServlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-class&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;init-param&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;param-name&gt;</fo:inline>contextConfigLocation<fo:inline font-weight="bold" color="#3F7F7F">&lt;/param-name&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;param-value&gt;</fo:inline>classpath:spring/configuration.xml<fo:inline font-weight="bold" color="#3F7F7F">&lt;/param-value&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/init-param&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;load-on-startup&gt;</fo:inline>1<fo:inline font-weight="bold" color="#3F7F7F">&lt;/load-on-startup&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet&gt;</fo:inline>

    <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-mapping&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;servlet-name&gt;</fo:inline>Asta4D Servlet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-name&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;url-pattern&gt;</fo:inline>/<fo:inline font-weight="bold" color="#3F7F7F">&lt;/url-pattern&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/servlet-mapping&gt;</fo:inline>

<fo:inline font-weight="bold" color="#3F7F7F">&lt;/web-app&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 17.1 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Secondly, the WebApplicationConfiguration instance should be declared as a bean in spring with additional Spring special
    configurations:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2896"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2897">

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"asta4dConfiguration"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.web.WebApplicationConfiguration"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.SpringManagedSnippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"searchPathList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;list&gt;</fo:inline>
                        <fo:inline font-weight="bold" color="#3F7F7F">&lt;value&gt;</fo:inline>com.foo.web.snippet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/value&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/list&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"instanceResolverList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;list&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.SpringManagedInstanceResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/list&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>

      </fo:block><fo:inline font-style="italic">The SpringManagedSnippetResolver will retrieve snippet instance from Spring container and the SpringManagedInstanceResolver
      will also retrieve request handler instance from Spring container. Further the SpringManagedSnippetResolver will treat the snippet
      name in html template files as bean id.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 17.2 </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following example shows a full image of Spring's configuration for Asta4D:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2903"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2904">

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"asta4dConfiguration"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.web.WebApplicationConfiguration"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.SpringManagedSnippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"instanceResolverList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;list&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.SpringManagedInstanceResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/list&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"pageInterceptorList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;list&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.interceptor.SamplePageInterceptor"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/list&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetInvoker"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetInvoker"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.snippet.DefaultSnippetInvoker"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetInterceptorList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;list&gt;</fo:inline>
                        <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.interceptor.SampleSnippetInterceptor"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/list&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>        
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"urlMappingRuleInitializer"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.UrlRules"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>
    
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ComplicatedSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.snippet.ComplicatedSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">scope</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"prototype"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"FormSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.snippet.FormSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">scope</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"prototype"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"SimpleSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.snippet.SimpleSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">scope</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"prototype"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"ShowCodeSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.snippet.ShowCodeSnippet"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">scope</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"prototype"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.sample.handler.LoginHandler"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>

      </fo:block><fo:inline font-style="italic">Note that Asta4D always treats snippet instance as singleton per request for field injection on snippet, 
      so the scope of snippet beans should be "prototype" basically except there is no field injection in snippet
      implementation. For the request handlers, "prototype" is not necessary since there is no field injection on
      request handler.</fo:inline><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 17.3 </fo:block></fo:block></fo:block></fo:block><fo:block id="integrate-spring-mvc"><fo:block><fo:block><fo:block keep-together.within-column="always" margin-left="0cm" font-family="Helvetica,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always"><fo:block font-family="Helvetica,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0cm"><fo:marker marker-class-name="section.head.marker">Integrate with Spring MVC</fo:marker><fo:block font-size="15pt" space-before.optimum="0.8em" space-before.minimum="0.8em" space-before.maximum="0.8em" space-after.optimum="0.1em" space-after.minimum="0.1em" space-after.maximum="0.1em">17.2. Integrate with Spring MVC</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Asta4D's template engine can be integrated to Spring MVC as view solution too. The following configuration shows how:</fo:block><fo:block><fo:block space-before.minimum="0.5em" space-before.optimum="0.5em" space-before.maximum="0.5em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" keep-together.within-column="always" id="d0e2913"><fo:block space-before.minimum="1em" space-before.optimum="1em" space-before.maximum="1em" space-after.minimum="0.1em" space-after.optimum="0.1em" space-after.maximum="0.1em" hyphenate="false" wrap-option="wrap" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" text-align="start" border-color="#444444" border-style="solid" border-width="0.1pt" padding-top="0.5em" padding-left="0.5em" padding-right="0.5em" padding-bottom="0.5em" margin-left="0.5em" margin-right="0.5em" font-family="monospace" font-size="8pt" keep-together.within-column="always" background-color="#F0F0F0" id="d0e2914">

    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">id</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"asta4dConfiguration"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.web.WebApplicationConfiguration"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"snippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.SpringManagedSnippetResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"searchPathList"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;array&gt;</fo:inline>
                        <fo:inline font-weight="bold" color="#3F7F7F">&lt;value&gt;</fo:inline>com.foo.web.snippet<fo:inline font-weight="bold" color="#3F7F7F">&lt;/value&gt;</fo:inline>
                    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/array&gt;</fo:inline>
                <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
            <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;/property&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"cacheEnable"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"false"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>
    
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.mvc.SpringWebPageViewResolver"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"prefix"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"/templates"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;property</fo:inline> <fo:inline font-weight="bold" color="#7F007F">name</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"suffix"</fo:inline> <fo:inline font-weight="bold" color="#7F007F">value</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">".html"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/bean&gt;</fo:inline>
    
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;mvc:interceptors&gt;</fo:inline>
        <fo:inline font-weight="bold" color="#3F7F7F">&lt;bean</fo:inline> <fo:inline font-weight="bold" color="#7F007F">class</fo:inline>=<fo:inline font-weight="bold" color="#2A00FF">"com.astamuse.asta4d.misc.spring.mvc.Asta4dContextInitializeHandlerInterceptor"</fo:inline><fo:inline font-weight="bold" color="#3F7F7F">/&gt;</fo:inline>
    <fo:inline font-weight="bold" color="#3F7F7F">&lt;/mvc:interceptors&gt;</fo:inline>

      </fo:block><fo:block space-before.optimum="0.1em" space-before.minimum="0.1em" space-before.maximum="0.1em" font-weight="normal" font-size="10pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" font-style="italic" keep-with-previous.within-column="always">Example 17.4 </fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence></fo:root>